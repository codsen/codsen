/**
 * json-variables
 * Resolves custom-marked, cross-referenced paths in parsed JSON
 * Version: 8.2.18
 * Author: Roy Revelt, Codsen Ltd
 * License: MIT
 * Homepage: https://codsen.com/os/json-variables/
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).jsonVariables=e()}(this,(function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function a(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function i(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||o(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){if(t){if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function c(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=o(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return s=t.done,t},e:function(t){c=!0,i=t},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw i}}}}var u="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function l(t,e,r){return t(r={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&r.path)}},r.exports),r.exports}var f=l((function(e,r){var n="__lodash_hash_undefined__",a=9007199254740991,i="[object Arguments]",o="[object Boolean]",s="[object Date]",c="[object Function]",l="[object GeneratorFunction]",f="[object Map]",h="[object Number]",g="[object Object]",p="[object Promise]",d="[object RegExp]",y="[object Set]",m="[object String]",v="[object Symbol]",b="[object WeakMap]",w="[object ArrayBuffer]",_="[object DataView]",T="[object Float32Array]",O="[object Float64Array]",A="[object Int8Array]",W="[object Int16Array]",I="[object Int32Array]",j="[object Uint8Array]",E="[object Uint8ClampedArray]",S="[object Uint16Array]",D="[object Uint32Array]",R=/\w*$/,H=/^\[object .+?Constructor\]$/,N=/^(?:0|[1-9]\d*)$/,x={};x[i]=x["[object Array]"]=x[w]=x[_]=x[o]=x[s]=x[T]=x[O]=x[A]=x[W]=x[I]=x[f]=x[h]=x[g]=x[d]=x[y]=x[m]=x[v]=x[j]=x[E]=x[S]=x[D]=!0,x["[object Error]"]=x[c]=x[b]=!1;var M="object"==t(u)&&u&&u.Object===Object&&u,C="object"==("undefined"==typeof self?"undefined":t(self))&&self&&self.Object===Object&&self,k=M||C||Function("return this")(),B=r&&!r.nodeType&&r,P=B&&e&&!e.nodeType&&e,F=P&&P.exports===B;function J(t,e){return t.set(e[0],e[1]),t}function q(t,e){return t.add(e),t}function V(t,e,r,n){var a=-1,i=t?t.length:0;for(n&&i&&(r=t[++a]);++a<i;)r=e(r,t[a],a,t);return r}function L(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function $(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r}function U(t,e){return function(r){return t(e(r))}}function z(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}var G,K=Array.prototype,Q=Function.prototype,X=Object.prototype,Y=k["__core-js_shared__"],Z=(G=/[^.]+$/.exec(Y&&Y.keys&&Y.keys.IE_PROTO||""))?"Symbol(src)_1."+G:"",tt=Q.toString,et=X.hasOwnProperty,rt=X.toString,nt=RegExp("^"+tt.call(et).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),at=F?k.Buffer:void 0,it=k.Symbol,ot=k.Uint8Array,st=U(Object.getPrototypeOf,Object),ct=Object.create,ut=X.propertyIsEnumerable,lt=K.splice,ft=Object.getOwnPropertySymbols,ht=at?at.isBuffer:void 0,gt=U(Object.keys,Object),pt=Pt(k,"DataView"),dt=Pt(k,"Map"),yt=Pt(k,"Promise"),mt=Pt(k,"Set"),vt=Pt(k,"WeakMap"),bt=Pt(Object,"create"),wt=Lt(pt),_t=Lt(dt),Tt=Lt(yt),Ot=Lt(mt),At=Lt(vt),Wt=it?it.prototype:void 0,It=Wt?Wt.valueOf:void 0;function jt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Et(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function St(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Dt(t){this.__data__=new Et(t)}function Rt(e,r){var n=Ut(e)||function(e){return function(e){return function(e){return!!e&&"object"==t(e)}(e)&&zt(e)}(e)&&et.call(e,"callee")&&(!ut.call(e,"callee")||rt.call(e)==i)}(e)?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(e.length,String):[],a=n.length,o=!!a;for(var s in e)!r&&!et.call(e,s)||o&&("length"==s||qt(s,a))||n.push(s);return n}function Ht(t,e,r){var n=t[e];et.call(t,e)&&$t(n,r)&&(void 0!==r||e in t)||(t[e]=r)}function Nt(t,e){for(var r=t.length;r--;)if($t(t[r][0],e))return r;return-1}function xt(t,e,r,n,a,u,p){var b;if(n&&(b=u?n(t,a,u,p):n(t)),void 0!==b)return b;if(!Qt(t))return t;var H=Ut(t);if(H){if(b=function(t){var e=t.length,r=t.constructor(e);e&&"string"==typeof t[0]&&et.call(t,"index")&&(r.index=t.index,r.input=t.input);return r}(t),!e)return function(t,e){var r=-1,n=t.length;e||(e=Array(n));for(;++r<n;)e[r]=t[r];return e}(t,b)}else{var N=Jt(t),M=N==c||N==l;if(Gt(t))return function(t,e){if(e)return t.slice();var r=new t.constructor(t.length);return t.copy(r),r}(t,e);if(N==g||N==i||M&&!u){if(L(t))return u?t:{};if(b=function(t){return"function"!=typeof t.constructor||Vt(t)?{}:(e=st(t),Qt(e)?ct(e):{});var e}(M?{}:t),!e)return function(t,e){return kt(t,Ft(t),e)}(t,function(t,e){return t&&kt(e,Xt(e),t)}(b,t))}else{if(!x[N])return u?t:{};b=function(t,e,r,n){var a=t.constructor;switch(e){case w:return Ct(t);case o:case s:return new a(+t);case _:return function(t,e){var r=e?Ct(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,n);case T:case O:case A:case W:case I:case j:case E:case S:case D:return function(t,e){var r=e?Ct(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}(t,n);case f:return function(t,e,r){return V(e?r($(t),!0):$(t),J,new t.constructor)}(t,n,r);case h:case m:return new a(t);case d:return function(t){var e=new t.constructor(t.source,R.exec(t));return e.lastIndex=t.lastIndex,e}(t);case y:return function(t,e,r){return V(e?r(z(t),!0):z(t),q,new t.constructor)}(t,n,r);case v:return i=t,It?Object(It.call(i)):{}}var i}(t,N,xt,e)}}p||(p=new Dt);var C=p.get(t);if(C)return C;if(p.set(t,b),!H)var k=r?function(t){return function(t,e,r){var n=e(t);return Ut(t)?n:function(t,e){for(var r=-1,n=e.length,a=t.length;++r<n;)t[a+r]=e[r];return t}(n,r(t))}(t,Xt,Ft)}(t):Xt(t);return function(t,e){for(var r=-1,n=t?t.length:0;++r<n&&!1!==e(t[r],r,t););}(k||t,(function(a,i){k&&(a=t[i=a]),Ht(b,i,xt(a,e,r,n,i,t,p))})),b}function Mt(t){return!(!Qt(t)||(e=t,Z&&Z in e))&&(Kt(t)||L(t)?nt:H).test(Lt(t));var e}function Ct(t){var e=new t.constructor(t.byteLength);return new ot(e).set(new ot(t)),e}function kt(t,e,r,n){r||(r={});for(var a=-1,i=e.length;++a<i;){var o=e[a],s=n?n(r[o],t[o],o,r,t):void 0;Ht(r,o,void 0===s?t[o]:s)}return r}function Bt(e,r){var n,a,i=e.__data__;return("string"==(a=t(n=r))||"number"==a||"symbol"==a||"boolean"==a?"__proto__"!==n:null===n)?i["string"==typeof r?"string":"hash"]:i.map}function Pt(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return Mt(r)?r:void 0}jt.prototype.clear=function(){this.__data__=bt?bt(null):{}},jt.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},jt.prototype.get=function(t){var e=this.__data__;if(bt){var r=e[t];return r===n?void 0:r}return et.call(e,t)?e[t]:void 0},jt.prototype.has=function(t){var e=this.__data__;return bt?void 0!==e[t]:et.call(e,t)},jt.prototype.set=function(t,e){return this.__data__[t]=bt&&void 0===e?n:e,this},Et.prototype.clear=function(){this.__data__=[]},Et.prototype.delete=function(t){var e=this.__data__,r=Nt(e,t);return!(r<0)&&(r==e.length-1?e.pop():lt.call(e,r,1),!0)},Et.prototype.get=function(t){var e=this.__data__,r=Nt(e,t);return r<0?void 0:e[r][1]},Et.prototype.has=function(t){return Nt(this.__data__,t)>-1},Et.prototype.set=function(t,e){var r=this.__data__,n=Nt(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},St.prototype.clear=function(){this.__data__={hash:new jt,map:new(dt||Et),string:new jt}},St.prototype.delete=function(t){return Bt(this,t).delete(t)},St.prototype.get=function(t){return Bt(this,t).get(t)},St.prototype.has=function(t){return Bt(this,t).has(t)},St.prototype.set=function(t,e){return Bt(this,t).set(t,e),this},Dt.prototype.clear=function(){this.__data__=new Et},Dt.prototype.delete=function(t){return this.__data__.delete(t)},Dt.prototype.get=function(t){return this.__data__.get(t)},Dt.prototype.has=function(t){return this.__data__.has(t)},Dt.prototype.set=function(t,e){var r=this.__data__;if(r instanceof Et){var n=r.__data__;if(!dt||n.length<199)return n.push([t,e]),this;r=this.__data__=new St(n)}return r.set(t,e),this};var Ft=ft?U(ft,Object):function(){return[]},Jt=function(t){return rt.call(t)};function qt(t,e){return!!(e=null==e?a:e)&&("number"==typeof t||N.test(t))&&t>-1&&t%1==0&&t<e}function Vt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||X)}function Lt(t){if(null!=t){try{return tt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function $t(t,e){return t===e||t!=t&&e!=e}(pt&&Jt(new pt(new ArrayBuffer(1)))!=_||dt&&Jt(new dt)!=f||yt&&Jt(yt.resolve())!=p||mt&&Jt(new mt)!=y||vt&&Jt(new vt)!=b)&&(Jt=function(t){var e=rt.call(t),r=e==g?t.constructor:void 0,n=r?Lt(r):void 0;if(n)switch(n){case wt:return _;case _t:return f;case Tt:return p;case Ot:return y;case At:return b}return e});var Ut=Array.isArray;function zt(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}(t.length)&&!Kt(t)}var Gt=ht||function(){return!1};function Kt(t){var e=Qt(t)?rt.call(t):"";return e==c||e==l}function Qt(e){var r=t(e);return!!e&&("object"==r||"function"==r)}function Xt(t){return zt(t)?Rt(t):function(t){if(!Vt(t))return gt(t);var e=[];for(var r in Object(t))et.call(t,r)&&"constructor"!=r&&e.push(r);return e}(t)}e.exports=function(t){return xt(t,!0,!0)}}));function h(t){return"string"==typeof t&&t.length&&"."===t[0]?t.slice(1):t}function g(e,r){return function e(r,n,i,o){var s,c,u,l,g=f(r),p=a({depth:-1,path:""},i);if(p.depth+=1,Array.isArray(g))for(s=0,c=g.length;s<c&&!o.now;s++){var d="".concat(p.path,".").concat(s);void 0!==g[s]?(p.parent=f(g),p.parentType="array",u=e(n(g[s],void 0,a(a({},p),{},{path:h(d)}),o),n,a(a({},p),{},{path:h(d)}),o),Number.isNaN(u)&&s<g.length?(g.splice(s,1),s-=1):g[s]=u):g.splice(s,1)}else if((l=g)&&"object"===t(l)&&!Array.isArray(l))for(var y in g){if(o.now&&null!=y)break;var m="".concat(p.path,".").concat(y);0===p.depth&&null!=y&&(p.topmostKey=y),p.parent=f(g),p.parentType="object",u=e(n(y,g[y],a(a({},p),{},{path:h(m)}),o),n,a(a({},p),{},{path:h(m)}),o),Number.isNaN(u)?delete g[y]:g[y]=u}return g}(e,r,{},{now:!1})}var p=new Map;function d(t,e){e=a({caseSensitive:!1},e);var r=t+JSON.stringify(e);if(p.has(r))return p.get(r);var n="!"===t[0];n&&(t=t.slice(1)),t=function(t){if("string"!=typeof t)throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}(t).replace(/\\\*/g,"[\\s\\S]*");var i=new RegExp("^".concat(t,"$"),e.caseSensitive?"":"i");return i.negated=n,p.set(r,i),i}var y=function(e,r,n){if(!Array.isArray(e)||!Array.isArray(r))throw new TypeError("Expected two arrays, got ".concat(t(e)," ").concat(t(r)));if(0===r.length)return e;var a="!"===r[0][0];r=r.map((function(t){return d(t,n)}));var i,o=[],s=c(e);try{for(s.s();!(i=s.n()).done;){var u,l=i.value,f=a,h=c(r);try{for(h.s();!(u=h.n()).done;){var g=u.value;g.test(l)&&(f=!g.negated)}}catch(t){h.e(t)}finally{h.f()}f&&o.push(l)}}catch(t){s.e(t)}finally{s.f()}return o};y.isMatch=function(t,e,r){var n=Array.isArray(t)?t:[t],a=Array.isArray(e)?e:[e];return n.some((function(t){return a.every((function(e){var n=d(e,r),a=n.test(t);return n.negated?!a:a}))}))};var m=l((function(e){e.exports=function(){var e=Object.prototype.toString;function r(t,e){return null!=t&&Object.prototype.hasOwnProperty.call(t,e)}function n(t){if(!t)return!0;if(o(t)&&0===t.length)return!0;if("string"!=typeof t){for(var e in t)if(r(t,e))return!1;return!0}return!1}function a(t){return e.call(t)}function i(e){return"object"===t(e)&&"[object Object]"===a(e)}var o=Array.isArray||function(t){return"[object Array]"===e.call(t)};function s(t){return"boolean"==typeof t||"[object Boolean]"===a(t)}function c(t){var e=parseInt(t);return e.toString()===t?e:t}function u(t){t=t||{};var e=function t(e){return Object.keys(t).reduce((function(r,n){return"create"===n||"function"==typeof t[n]&&(r[n]=t[n].bind(t,e)),r}),{})};function a(e,n){return t.includeInheritedProps||"number"==typeof n&&Array.isArray(e)||r(e,n)}function u(t,e){if(a(t,e))return t[e]}function l(t,e,r,n){if("number"==typeof e&&(e=[e]),!e||0===e.length)return t;if("string"==typeof e)return l(t,e.split(".").map(c),r,n);var a=e[0],i=u(t,a);return 1===e.length?(void 0!==i&&n||(t[a]=r),i):(void 0===i&&("number"==typeof e[1]?t[a]=[]:t[a]={}),l(t[a],e.slice(1),r,n))}return e.has=function(e,n){if("number"==typeof n?n=[n]:"string"==typeof n&&(n=n.split(".")),!n||0===n.length)return!!e;for(var a=0;a<n.length;a++){var i=c(n[a]);if(!("number"==typeof i&&o(e)&&i<e.length||(t.includeInheritedProps?i in Object(e):r(e,i))))return!1;e=e[i]}return!0},e.ensureExists=function(t,e,r){return l(t,e,r,!0)},e.set=function(t,e,r,n){return l(t,e,r,n)},e.insert=function(t,r,n,a){var i=e.get(t,r);a=~~a,o(i)||(i=[],e.set(t,r,i)),i.splice(a,0,n)},e.empty=function(t,r){var c,u;if(!n(r)&&null!=t&&(c=e.get(t,r))){if("string"==typeof c)return e.set(t,r,"");if(s(c))return e.set(t,r,!1);if("number"==typeof c)return e.set(t,r,0);if(o(c))c.length=0;else{if(!i(c))return e.set(t,r,null);for(u in c)a(c,u)&&delete c[u]}}},e.push=function(t,r){var n=e.get(t,r);o(n)||(n=[],e.set(t,r,n)),n.push.apply(n,Array.prototype.slice.call(arguments,2))},e.coalesce=function(t,r,n){for(var a,i=0,o=r.length;i<o;i++)if(void 0!==(a=e.get(t,r[i])))return a;return n},e.get=function(t,r,n){if("number"==typeof r&&(r=[r]),!r||0===r.length)return t;if(null==t)return n;if("string"==typeof r)return e.get(t,r.split("."),n);var a=c(r[0]),i=u(t,a);return void 0===i?n:1===r.length?i:e.get(t[a],r.slice(1),n)},e.del=function(t,r){if("number"==typeof r&&(r=[r]),null==t)return t;if(n(r))return t;if("string"==typeof r)return e.del(t,r.split("."));var i=c(r[0]);return a(t,i)?1!==r.length?e.del(t[i],r.slice(1)):(o(t)?t.splice(i,1):delete t[i],t):t},e}var l=u();return l.create=u,l.withInheritedProps=u({includeInheritedProps:!0}),l}()}));function v(t){return"string"==typeof t?t.length>0?[t]:[]:t}function b(e){return e&&"object"===t(e)&&!Array.isArray(e)}function w(t){return"string"==typeof t}function _(t,e,r,n,a,i){var o="function"==typeof r?r():r;if(e<0&&a&&"EOL"===o)return o;if(e>=t.length&&!a)return!1;for(var s=a?1:r.length,c=!1,u=!1,l=n.maxMismatches,f=e,h=!1,g=!1,p=!1;t[f];){var d=i(f);if(n.trimBeforeMatching&&""===t[f].trim()){if(!t[d]&&a&&"EOL"===r)return!0;f=i(f)}else if(!n.i&&n.trimCharsBeforeMatching.includes(t[f])||n.i&&n.trimCharsBeforeMatching.map((function(t){return t.toLowerCase()})).includes(t[f].toLowerCase())){if(a&&"EOL"===r&&!t[d])return!0;f=i(f)}else{var y=d>f?r[r.length-s]:r[s-1];if(!n.i&&t[f]===y||n.i&&t[f].toLowerCase()===y.toLowerCase()){if(h||(h=!0),u||(u=!0),s===r.length?g=!0:1===s&&(p=!0),(s-=1)<1)return f}else{if(!(n.maxMismatches&&l&&f))return!(0!==f||1!==s||n.lastMustMatch||!u)&&0;l-=1;for(var m=0;m<=l;m++){var v=d>f?r[r.length-s+1+m]:r[s-2-m],b=t[i(f)];if(v&&(!n.i&&t[f]===v||n.i&&t[f].toLowerCase()===v.toLowerCase())&&(!n.firstMustMatch||s!==r.length)){s-=2,h=!0;break}if(b&&v&&(!n.i&&b===v||n.i&&b.toLowerCase()===v.toLowerCase())&&(!n.firstMustMatch||s!==r.length)){s-=1,h=!0;break}if(void 0===v&&l>=0&&h&&(!n.firstMustMatch||g)&&(!n.lastMustMatch||p))return f}h||(c=f)}if(!1!==c&&c!==f&&(c=!1),s<1)return f;f=i(f)}}return s>0?!(!a||"EOL"!==o)||!!(n.maxMismatches>=s&&u)&&(c||0):void 0}function T(e,r,n,i,o){var s={cb:void 0,i:!1,trimBeforeMatching:!1,trimCharsBeforeMatching:[],maxMismatches:0,firstMustMatch:!1,lastMustMatch:!1};if(b(o)&&Object.prototype.hasOwnProperty.call(o,"trimBeforeMatching")&&"boolean"!=typeof o.trimBeforeMatching)throw new Error("string-match-left-right/".concat(e,"(): [THROW_ID_09] opts.trimBeforeMatching should be boolean!").concat(Array.isArray(o.trimBeforeMatching)?" Did you mean to use opts.trimCharsBeforeMatching?":""));var c,u,l,f,h=a(a({},s),o);if(h.trimCharsBeforeMatching=v(h.trimCharsBeforeMatching),h.trimCharsBeforeMatching=h.trimCharsBeforeMatching.map((function(t){return w(t)?t:String(t)})),!w(r))return!1;if(!r.length)return!1;if(!Number.isInteger(n)||n<0)throw new Error("string-match-left-right/".concat(e,"(): [THROW_ID_03] the second argument should be a natural number. Currently it's of a type: ").concat(t(n),", equal to:\n").concat(JSON.stringify(n,null,4)));if(w(i))c=[i];else if(Array.isArray(i))c=i;else if(i){if("function"!=typeof i)throw new Error("string-match-left-right/".concat(e,"(): [THROW_ID_05] the third argument, whatToMatch, is neither string nor array of strings! It's ").concat(t(i),", equal to:\n").concat(JSON.stringify(i,null,4)));(c=[]).push(i)}else c=i;if(o&&!b(o))throw new Error("string-match-left-right/".concat(e,"(): [THROW_ID_06] the fourth argument, options object, should be a plain object. Currently it's of a type \"").concat(t(o),'", and equal to:\n').concat(JSON.stringify(o,null,4)));if(h.trimCharsBeforeMatching.some((function(t,e){return t.length>1&&(l=e,f=t,!0)})))throw new Error("string-match-left-right/".concat(e,"(): [THROW_ID_07] the fourth argument, options object contains trimCharsBeforeMatching. It was meant to list the single characters but one of the entries at index ").concat(l," is longer than 1 character, ").concat(f.length," (equals to ").concat(f,"). Please split it into separate characters and put into array as separate elements."));if(!c||!Array.isArray(c)||Array.isArray(c)&&!c.length||Array.isArray(c)&&1===c.length&&w(c[0])&&!c[0].trim()){if("function"==typeof h.cb){var g,p=n;if("matchLeftIncl"!==e&&"matchRight"!==e||(p+=1),"L"===e[5])for(var d=p;d--;){var y=r[d];if((!h.trimBeforeMatching||h.trimBeforeMatching&&void 0!==y&&y.trim())&&(!h.trimCharsBeforeMatching.length||void 0!==y&&!h.trimCharsBeforeMatching.includes(y))){g=d;break}}else if(e.startsWith("matchRight"))for(var m=p;m<r.length;m++){var T=r[m];if((!h.trimBeforeMatching||h.trimBeforeMatching&&T.trim())&&(!h.trimCharsBeforeMatching.length||!h.trimCharsBeforeMatching.includes(T))){g=m;break}}if(void 0===g)return!1;var O=r[g],A=g+1,W="";return A&&A>0&&(W=r.slice(0,A)),"L"===e[5]?h.cb(O,W,g):(g&&g>0&&(W=r.slice(g)),h.cb(O,W,g))}var I="";throw o||(I=" More so, the whole options object, the fourth input argument, is missing!"),new Error("string-match-left-right/".concat(e,'(): [THROW_ID_08] the third argument, "whatToMatch", was given as an empty string. This means, you intend to match purely by a callback. The callback was not set though, the opts key "cb" is not set!').concat(I))}for(var j=0,E=c.length;j<E;j++){u="function"==typeof c[j];var S=c[j],D=void 0,R=void 0,H="",N=n;"matchRight"===e?N+=1:"matchLeft"===e&&(N-=1);var x=_(r,N,S,h,u,(function(t){return"L"===e[5]?t-1:t+1}));if(x&&u&&"function"==typeof S&&"EOL"===S())return!(!S()||h.cb&&!h.cb(D,H,R))&&S();if(Number.isInteger(x)&&(R=e.startsWith("matchLeft")?x-1:x+1,H="L"===e[5]?r.slice(0,x):r.slice(R)),R<0&&(R=void 0),r[R]&&(D=r[R]),Number.isInteger(x)&&(!h.cb||h.cb(D,H,R)))return S}return!1}function O(t,e,r,n){return T("matchLeftIncl",t,e,r,n)}function A(t,e,r,n){return T("matchRightIncl",t,e,r,n)}function W(t){return"string"==typeof t}function I(e,r,n,i){if(i&&(!(o=i)||"object"!==t(o)||Array.isArray(o)))throw new TypeError("string-find-heads-tails: [THROW_ID_01] the fourth input argument, an Optional Options Object, must be a plain object! Currently it's equal to: ".concat(i," (type: ").concat(t(i),")"));var o,s,c,u={fromIndex:0,throwWhenSomethingWrongIsDetected:!0,allowWholeValueToBeOnlyHeadsOrTails:!0,source:"string-find-heads-tails",matchHeadsAndTailsStrictlyInPairsByTheirOrder:!1,relaxedAPI:!1},l=a(a({},u),i);if("string"==typeof l.fromIndex&&/^\d*$/.test(l.fromIndex))l.fromIndex=Number(l.fromIndex);else if(!Number.isInteger(l.fromIndex)||l.fromIndex<0)throw new TypeError("".concat(l.source," [THROW_ID_18] the fourth input argument must be a natural number or zero! Currently it's: ").concat(l.fromIndex));if(!W(e)||0===e.length){if(l.relaxedAPI)return[];throw new TypeError("string-find-heads-tails: [THROW_ID_02] the first input argument, input string, must be a non-zero-length string! Currently it's: ".concat(t(e),", equal to: ").concat(e))}if("string"!=typeof r&&!Array.isArray(r)){if(l.relaxedAPI)return[];throw new TypeError("string-find-heads-tails: [THROW_ID_03] the second input argument, heads, must be either a string or an array of strings! Currently it's: ".concat(t(r),", equal to:\n").concat(JSON.stringify(r,null,4)))}if("string"==typeof r){if(0===r.length){if(l.relaxedAPI)return[];throw new TypeError("string-find-heads-tails: [THROW_ID_04] the second input argument, heads, must be a non-empty string! Currently it's empty.")}r=v(r)}else if(Array.isArray(r)){if(0===r.length){if(l.relaxedAPI)return[];throw new TypeError("string-find-heads-tails: [THROW_ID_05] the second input argument, heads, must be a non-empty array and contain at least one string! Currently it's empty.")}if(r.every((function(t,e){return s=t,c=e,W(t)}))){if(!r.every((function(t,e){return c=e,W(t)&&t.length>0&&""!==t.trim()}))){if(!l.relaxedAPI)throw new TypeError("string-find-heads-tails: [THROW_ID_07] the second input argument, heads, should not contain empty strings! For example, there's one detected at index ".concat(c," of heads array:\n").concat(JSON.stringify(r,null,4),"."));if(0===(r=r.filter((function(t){return W(t)&&t.length>0}))).length)return[]}}else{if(!l.relaxedAPI)throw new TypeError("string-find-heads-tails: [THROW_ID_06] the second input argument, heads, contains non-string elements! For example, element at ".concat(c,"th index is ").concat(t(s),", equal to:\n").concat(JSON.stringify(s,null,4),". Whole heads array looks like:\n").concat(JSON.stringify(r,null,4)));if(0===(r=r.filter((function(t){return W(t)&&t.length>0}))).length)return[]}}if(!W(n)&&!Array.isArray(n)){if(l.relaxedAPI)return[];throw new TypeError("string-find-heads-tails: [THROW_ID_08] the third input argument, tails, must be either a string or an array of strings! Currently it's: ".concat(t(n),", equal to:\n").concat(JSON.stringify(n,null,4)))}if(W(n)){if(0===n.length){if(l.relaxedAPI)return[];throw new TypeError("string-find-heads-tails: [THROW_ID_09] the third input argument, tails, must be a non-empty string! Currently it's empty.")}n=v(n)}else if(Array.isArray(n)){if(0===n.length){if(l.relaxedAPI)return[];throw new TypeError("string-find-heads-tails: [THROW_ID_10] the third input argument, tails, must be a non-empty array and contain at least one string! Currently it's empty.")}if(n.every((function(t,e){return s=t,c=e,W(t)}))){if(!n.every((function(t,e){return c=e,W(t)&&t.length>0&&""!==t.trim()}))){if(!l.relaxedAPI)throw new TypeError("string-find-heads-tails: [THROW_ID_12] the third input argument, tails, should not contain empty strings! For example, there's one detected at index ".concat(c,". Whole tails array is equal to:\n").concat(JSON.stringify(n,null,4)));if(0===(n=n.filter((function(t){return W(t)&&t.length>0}))).length)return[]}}else{if(!l.relaxedAPI)throw new TypeError("string-find-heads-tails: [THROW_ID_11] the third input argument, tails, contains non-string elements! For example, element at ".concat(c,"th index is ").concat(t(s),", equal to:\n").concat(JSON.stringify(s,null,4),". Whole tails array is equal to:\n").concat(JSON.stringify(n,null,4)));if(0===(n=n.filter((function(t){return W(t)&&t.length>0}))).length)return[]}}var f=l.source===u.source;if(l.throwWhenSomethingWrongIsDetected&&!l.allowWholeValueToBeOnlyHeadsOrTails){if(v(r).includes(e))throw new Error("".concat(l.source).concat(f?": [THROW_ID_16]":""," the whole input string can't be equal to ").concat(W(r)?"":"one of ","heads (").concat(e,")!"));if(v(n).includes(e))throw new Error("".concat(l.source).concat(f?": [THROW_ID_17]":""," the whole input string can't be equal to ").concat(W(n)?"":"one of ","tails (").concat(e,")!"))}for(var h,g=r.concat(n).map((function(t){return t.charAt(0)})).reduce((function(t,e){return e.charCodeAt(0)>t[1]?[t[0],e.charCodeAt(0)]:e.charCodeAt(0)<t[0]?[e.charCodeAt(0),t[1]]:t}),[r[0].charCodeAt(0),r[0].charCodeAt(0)]),p=[],d=!1,y={},m=!1,b=l.fromIndex,w=e.length;b<w;b++){var _=e[b].charCodeAt(0);if(_<=g[1]&&_>=g[0]){var T=A(e,b,r);if(T&&l.matchHeadsAndTailsStrictlyInPairsByTheirOrder)for(var O=r.length;O--;)if(r[O]===T){h=O;break}if(T){if(!d){(y={}).headsStartAt=b,y.headsEndAt=b+T.length,d=!0,b+=T.length-1,m&&(m=!1);continue}if(l.throwWhenSomethingWrongIsDetected)throw new TypeError("".concat(l.source).concat(f?": [THROW_ID_19]":"",' When processing "').concat(e,'", we found heads (').concat(e.slice(b,b+T.length),') starting at character with index number "').concat(b,'" and there was another set of heads before it! Generally speaking, there should be "heads-tails-heads-tails", not "heads-heads-tails"!\nWe\'re talking about the area of the code:\n\n\n--------------------------------------starts\n').concat(e.slice(Math.max(b-200,0),b),"\n      ","[".concat(33,"m-------\x3e[",39,"m")," ","[".concat(31,"m",e.slice(b,b+T.length),"[",39,"m")," [",33,"m","<-------","[",39,"m\n").concat(e.slice(b+T.length,Math.min(w,b+200)),"\n--------------------------------------ends\n\n\nTo turn off this error being thrown, set opts.throwWhenSomethingWrongIsDetected to Boolean false."))}var I=A(e,b,n);if(d&&I&&l.matchHeadsAndTailsStrictlyInPairsByTheirOrder&&void 0!==h&&void 0!==n[h]&&n[h]!==I){for(var j=void 0,E=n.length;E--;)if(n[E]===I){j=E;break}throw new TypeError("".concat(l.source).concat(f?": [THROW_ID_20]":"",' When processing "').concat(e,'", we had "opts.matchHeadsAndTailsStrictlyInPairsByTheirOrder" on. We found heads (').concat(r[h],") but the tails the followed it were not of the same index, ").concat(h," (").concat(n[h],") but ").concat(j," (").concat(I,")."))}if(I){if(d){y.tailsStartAt=b,y.tailsEndAt=b+I.length,p.push(y),y={},d=!1,b+=I.length-1;continue}l.throwWhenSomethingWrongIsDetected&&(m="".concat(l.source).concat(f?": [THROW_ID_21]":"",' When processing "').concat(e,'", we found tails (').concat(e.slice(b,b+I.length),') starting at character with index number "').concat(b,"\" but there were no heads preceding it. That's very naughty!"))}}if(l.throwWhenSomethingWrongIsDetected&&b===w-1){if(0!==Object.keys(y).length)throw new TypeError("".concat(l.source).concat(f?": [THROW_ID_22]":"",' When processing "').concat(e,"\", we reached the end of the string and yet didn't find any tails (").concat(JSON.stringify(n,null,4),") to match the last detected heads (").concat(e.slice(y.headsStartAt,y.headsEndAt),")!"));if(m)throw new Error(m)}}return p}function j(e,r,n){if(!e)throw new Error("ast-get-values-by-key: [THROW_ID_01] the first argument is missing!");if(!r)throw new Error("ast-get-values-by-key: [THROW_ID_02] the second argument is missing!");var a,i,o;if(Array.isArray(r)){if(r.length&&r.some((function(t,e){return"string"!=typeof t&&(a=e,i=t,!0)})))throw new Error("ast-get-values-by-key: [THROW_ID_03] the second argument is array of values and not all of them are strings! For example, at index ".concat(a,", we have a value ").concat(JSON.stringify(i,null,0)," which is not string but ").concat(t(i),"!"))}else if("string"!=typeof r)throw new Error("ast-get-values-by-key: [THROW_ID_04] the second argument must be string! Currently it's of a type \"".concat(t(r),'", equal to:\n').concat(JSON.stringify(r,null,4)));("string"==typeof n||n)&&(o="string"==typeof n?[n]:f(n));var s=[],c=g(e,(function(t,e,n){var a=void 0!==e?e:t;if(void 0!==e&&y.isMatch(t,r,{caseSensitive:!0}))if(void 0===o)s.push({val:e,path:n.path});else if(o.length>0)return o.shift();return a}));return void 0===o?s:c}var E="Â ";function S(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;function r(t){return Array.from(t).reverse().join("")}function n(t,e,r){var n=r?"\n":"\r",a=r?"\r":"\n";if(!t)return t;for(var i=0,o="",s=0,c=t.length;s<c;s++)(t[s]===n||t[s]===a&&t[s-1]!==n)&&i++,"\r\n".includes(t[s])||t[s]===E?t[s]===E?o+=t[s]:t[s]===n?i<=e&&(o+=t[s],t[s+1]===a&&(o+=t[s+1],s++)):t[s]===a&&(!t[s-1]||t[s-1]!==n)&&i<=e&&(o+=t[s]):t[s+1]||i||(o+=" ");return o}if("string"==typeof t&&t.length){var a=1;"number"==typeof+e&&Number.isInteger(+e)&&+e>=0&&(a=+e);var i="",o="";if(t.trim()){if(!t[0].trim())for(var s=0,c=t.length;s<c;s++)if(t[s].trim()){i=t.slice(0,s);break}}else i=t;if(t.trim()&&(""===t.slice(-1).trim()||t.slice(-1)===E))for(var u=t.length;u--;)if(t[u].trim()){o=t.slice(u+1);break}return"".concat(n(i,a,!1)).concat(t.trim()).concat(r(n(r(o),a,!0)))}return t}function D(t,e){if(!Array.isArray(t)||!t.length)return t;var r,n,i=a(a({},{strictlyTwoElementsInRangeArrays:!1,progressFn:null}),e);if(i.strictlyTwoElementsInRangeArrays&&!t.filter((function(t){return t})).every((function(t,e){return 2===t.length||(r=e,n=t.length,!1)})))throw new TypeError("ranges-sort: [THROW_ID_03] The first argument should be an array and must consist of arrays which are natural number indexes representing TWO string index ranges. However, ".concat(r,"th range (").concat(JSON.stringify(t[r],null,4),") has not two but ").concat(n," elements!"));if(!t.filter((function(t){return t})).every((function(t,e){return!(!Number.isInteger(t[0])||t[0]<0||!Number.isInteger(t[1])||t[1]<0)||(r=e,!1)})))throw new TypeError("ranges-sort: [THROW_ID_04] The first argument should be an array and must consist of arrays which are natural number indexes representing string index ranges. However, ".concat(r,"th range (").concat(JSON.stringify(t[r],null,4),") does not consist of only natural numbers!"));var o=Math.pow(t.filter((function(t){return t})).length,2),s=0;return Array.from(t).filter((function(t){return t})).sort((function(t,e){return i.progressFn&&(s+=1,i.progressFn(Math.floor(100*s/o))),t[0]===e[0]?t[1]<e[1]?-1:t[1]>e[1]?1:0:t[0]<e[0]?-1:1}))}function R(e,r){function n(t){return"string"==typeof t}function o(e){return e&&"object"===t(e)&&!Array.isArray(e)}if(!Array.isArray(e)||!e.length)return null;var s,c={mergeType:1,progressFn:null,joinRangesThatTouchEdges:!0};if(r){if(!o(r))throw new Error("emlint: [THROW_ID_03] the second input argument must be a plain object. It was given as:\n".concat(JSON.stringify(r,null,4)," (type ").concat(t(r),")"));if((s=a(a({},c),r)).progressFn&&o(s.progressFn)&&!Object.keys(s.progressFn).length)s.progressFn=null;else if(s.progressFn&&"function"!=typeof s.progressFn)throw new Error('ranges-merge: [THROW_ID_01] opts.progressFn must be a function! It was given of a type: "'.concat(t(s.progressFn),'", equal to ').concat(JSON.stringify(s.progressFn,null,4)));if(s.mergeType&&1!==s.mergeType&&2!==s.mergeType)if(n(s.mergeType)&&"1"===s.mergeType.trim())s.mergeType=1;else{if(!n(s.mergeType)||"2"!==s.mergeType.trim())throw new Error('ranges-merge: [THROW_ID_02] opts.mergeType was customised to a wrong thing! It was given of a type: "'.concat(t(s.mergeType),'", equal to ').concat(JSON.stringify(s.mergeType,null,4)));s.mergeType=2}if("boolean"!=typeof s.joinRangesThatTouchEdges)throw new Error('ranges-merge: [THROW_ID_04] opts.joinRangesThatTouchEdges was customised to a wrong thing! It was given of a type: "'.concat(t(s.joinRangesThatTouchEdges),'", equal to ').concat(JSON.stringify(s.joinRangesThatTouchEdges,null,4)))}else s=a({},c);for(var u,l,f,h=e.filter((function(t){return t})).map((function(t){return i(t)})).filter((function(t){return void 0!==t[2]||t[0]!==t[1]})),g=(u=s.progressFn?D(h,{progressFn:function(t){(f=Math.floor(t/5))!==l&&(l=f,s.progressFn(f))}}):D(h)).length-1,p=g;p>0;p--)s.progressFn&&(f=Math.floor(78*(1-p/g))+21)!==l&&f>l&&(l=f,s.progressFn(f)),(u[p][0]<=u[p-1][0]||!s.joinRangesThatTouchEdges&&u[p][0]<u[p-1][1]||s.joinRangesThatTouchEdges&&u[p][0]<=u[p-1][1])&&(u[p-1][0]=Math.min(u[p][0],u[p-1][0]),u[p-1][1]=Math.max(u[p][1],u[p-1][1]),void 0!==u[p][2]&&(u[p-1][0]>=u[p][0]||u[p-1][1]<=u[p][1])&&null!==u[p-1][2]&&(null===u[p][2]&&null!==u[p-1][2]?u[p-1][2]=null:void 0!==u[p-1][2]?2===s.mergeType&&u[p-1][0]===u[p][0]?u[p-1][2]=u[p][2]:u[p-1][2]+=u[p][2]:u[p-1][2]=u[p][2]),u.splice(p,1),p=u.length);return u.length?u:null}function H(t){return null!=t}function N(t){return Number.isInteger(t)&&t>=0}function x(t){return"string"==typeof t}function M(t){return/^\d*$/.test(t)?parseInt(t,10):t}var C=function(){function r(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var n=a(a({},{limitToBeAddedWhitespace:!1,limitLinebreaksCount:1,mergeType:1}),e);if(n.mergeType&&1!==n.mergeType&&2!==n.mergeType)if(x(n.mergeType)&&"1"===n.mergeType.trim())n.mergeType=1;else{if(!x(n.mergeType)||"2"!==n.mergeType.trim())throw new Error('ranges-push: [THROW_ID_02] opts.mergeType was customised to a wrong thing! It was given of a type: "'.concat(t(n.mergeType),'", equal to ').concat(JSON.stringify(n.mergeType,null,4)));n.mergeType=2}this.opts=n}var n,o,s;return n=r,(o=[{key:"add",value:function(e,r,n){for(var a=this,o=arguments.length,s=new Array(o>3?o-3:0),c=3;c<o;c++)s[c-3]=arguments[c];if(s.length>0)throw new TypeError("ranges-push/Ranges/add(): [THROW_ID_03] Please don't overload the add() method. From the 4th input argument onwards we see these redundant arguments: ".concat(JSON.stringify(s,null,4)));if(H(e)||H(r)){if(H(e)&&!H(r)){if(Array.isArray(e)){if(e.length){if(e.some((function(t){return Array.isArray(t)})))return void e.forEach((function(t){Array.isArray(t)&&a.add.apply(a,i(t))}));e.length>1&&N(M(e[0]))&&N(M(e[1]))&&this.add.apply(this,i(e))}return}throw new TypeError('ranges-push/Ranges/add(): [THROW_ID_12] the first input argument, "from" is set ('.concat(JSON.stringify(e,null,0),') but second-one, "to" is not (').concat(JSON.stringify(r,null,0),")"))}if(!H(e)&&H(r))throw new TypeError('ranges-push/Ranges/add(): [THROW_ID_13] the second input argument, "to" is set ('.concat(JSON.stringify(r,null,0),') but first-one, "from" is not (').concat(JSON.stringify(e,null,0),")"));var u=/^\d*$/.test(e)?parseInt(e,10):e,l=/^\d*$/.test(r)?parseInt(r,10):r;if(N(n)&&(n=String(n)),!N(u)||!N(l))throw N(u)&&u>=0?new TypeError('ranges-push/Ranges/add(): [THROW_ID_10] "to" value, the second input argument, must be a natural number or zero! Currently it\'s of a type "'.concat(t(l),'" equal to: ').concat(JSON.stringify(l,null,4))):new TypeError('ranges-push/Ranges/add(): [THROW_ID_09] "from" value, the first input argument, must be a natural number or zero! Currently it\'s of a type "'.concat(t(u),'" equal to: ').concat(JSON.stringify(u,null,4)));if(H(n)&&!x(n)&&!N(n))throw new TypeError("ranges-push/Ranges/add(): [THROW_ID_08] The third argument, the value to add, was given not as string but ".concat(t(n),", equal to:\n").concat(JSON.stringify(n,null,4)));if(H(this.ranges)&&Array.isArray(this.last())&&u===this.last()[1]){if(this.last()[1]=l,this.last()[2],null!==this.last()[2]&&H(n)){var f=!(H(this.last()[2])&&this.last()[2].length>0)||this.opts&&this.opts.mergeType&&1!==this.opts.mergeType?n:this.last()[2]+n;this.opts.limitToBeAddedWhitespace&&(f=S(f,this.opts.limitLinebreaksCount)),x(f)&&!f.length||(this.last()[2]=f)}}else{this.ranges||(this.ranges=[]);var h=void 0===n||x(n)&&!n.length?[u,l]:[u,l,this.opts.limitToBeAddedWhitespace?S(n,this.opts.limitLinebreaksCount):n];this.ranges.push(h)}}}},{key:"push",value:function(t,e,r){for(var n=arguments.length,a=new Array(n>3?n-3:0),i=3;i<n;i++)a[i-3]=arguments[i];this.add.apply(this,[t,e,r].concat(a))}},{key:"current",value:function(){var t=this;return null!=this.ranges?(this.ranges=R(this.ranges,{mergeType:this.opts.mergeType}),this.ranges&&this.opts.limitToBeAddedWhitespace?this.ranges.map((function(e){return H(e[2])?[e[0],e[1],S(e[2],t.opts.limitLinebreaksCount)]:e})):this.ranges):null}},{key:"wipe",value:function(){this.ranges=void 0}},{key:"replace",value:function(t){if(Array.isArray(t)&&t.length){if(!Array.isArray(t[0])||!N(t[0][0]))throw new Error("ranges-push/Ranges/replace(): [THROW_ID_11] Single range was given but we expected array of arrays! The first element, ".concat(JSON.stringify(t[0],null,4)," should be an array and its first element should be an integer, a string index."));this.ranges=Array.from(t)}else this.ranges=void 0}},{key:"last",value:function(){return void 0!==this.ranges&&Array.isArray(this.ranges)?this.ranges[this.ranges.length-1]:null}}])&&e(n.prototype,o),s&&e(n,s),r}();function k(t){return null!=t}function B(t){return"string"==typeof t}function P(e,r,n){var a,i=0,o=0;if(0===arguments.length)throw new Error("ranges-apply: [THROW_ID_01] inputs missing!");if(!B(e))throw new TypeError("ranges-apply: [THROW_ID_02] first input argument must be a string! Currently it's: ".concat(t(e),", equal to: ").concat(JSON.stringify(e,null,4)));if(r&&!Array.isArray(r))throw new TypeError("ranges-apply: [THROW_ID_03] second input argument must be an array (or null)! Currently it's: ".concat(t(r),", equal to: ").concat(JSON.stringify(r,null,4)));if(n&&"function"!=typeof n)throw new TypeError("ranges-apply: [THROW_ID_04] the third input argument must be a function (or falsey)! Currently it's: ".concat(t(n),", equal to: ").concat(JSON.stringify(n,null,4)));if(!r||!r.filter((function(t){return t})).length)return e;var s=(a=Array.isArray(r)&&(Number.isInteger(r[0])&&r[0]>=0||/^\d*$/.test(r[0]))&&(Number.isInteger(r[1])&&r[1]>=0||/^\d*$/.test(r[1]))?[Array.from(r)]:Array.from(r)).length,c=0;a.filter((function(t){return t})).forEach((function(e,r){if(n&&(i=Math.floor(c/s*10))!==o&&(o=i,n(i)),!Array.isArray(e))throw new TypeError("ranges-apply: [THROW_ID_05] ranges array, second input arg., has ".concat(r,"th element not an array: ").concat(JSON.stringify(e,null,4),", which is ").concat(t(e)));if(!Number.isInteger(e[0])||e[0]<0){if(!/^\d*$/.test(e[0]))throw new TypeError("ranges-apply: [THROW_ID_06] ranges array, second input arg. has ".concat(r,"th element, array [").concat(e[0],",").concat(e[1],"]. That array has first element not an integer, but ").concat(t(e[0]),", equal to: ").concat(JSON.stringify(e[0],null,4),". Computer doesn't like this."));a[r][0]=Number.parseInt(a[r][0],10)}if(!Number.isInteger(e[1])){if(!/^\d*$/.test(e[1]))throw new TypeError("ranges-apply: [THROW_ID_07] ranges array, second input arg. has ".concat(r,"th element, array [").concat(e[0],",").concat(e[1],"]. That array has second element not an integer, but ").concat(t(e[1]),", equal to: ").concat(JSON.stringify(e[1],null,4),". Computer doesn't like this."));a[r][1]=Number.parseInt(a[r][1],10)}c+=1}));var u=R(a,{progressFn:function(t){n&&(i=10+Math.floor(t/10))!==o&&(o=i,n(i))}});if(!u)return e;var l=u.length;if(l>0){var f=e.slice(u[l-1][1]);e=u.reduce((function(t,r,a,s){n&&(i=20+Math.floor(a/l*80))!==o&&(o=i,n(i));var c=0===a?0:s[a-1][1],u=s[a][0];return t+e.slice(c,u)+(k(s[a][2])?s[a][2]:"")}),""),e+=f}return e}var F,J,q=Function.prototype,V=Object.prototype,L=q.toString,$=V.hasOwnProperty,U=L.call(Object),z=V.toString,G=(F=Object.getPrototypeOf,J=Object,function(t){return F(J(t))});var K=function(e){if(!function(e){return!!e&&"object"==t(e)}(e)||"[object Object]"!=z.call(e)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(e))return!1;var r=G(e);if(null===r)return!0;var n=$.call(r,"constructor")&&r.constructor;return"function"==typeof n&&n instanceof n&&L.call(n)==U};function Q(e,r){if("string"!=typeof e)throw new Error("string-trim-spaces-only: [THROW_ID_01] input must be string! It was given as ".concat(t(e),", equal to:\n").concat(JSON.stringify(e,null,4)));var n,i,o=a(a({},{classicTrim:!1,cr:!1,lf:!1,tab:!1,space:!0,nbsp:!1}),r);function s(t){return o.classicTrim&&!t.trim()||!o.classicTrim&&(o.space&&" "===t||o.cr&&"\r"===t||o.lf&&"\n"===t||o.tab&&"\t"===t||o.nbsp&&"Â "===t)}if(e.length){if(s(e[0]))for(var c=0,u=e.length;c<u;c++){if(!s(e[c])){n=c;break}if(c===e.length-1)return{res:"",ranges:[[0,e.length]]}}if(s(e[e.length-1]))for(var l=e.length;l--;)if(!s(e[l])){i=l+1;break}return n?i?{res:e.slice(n,i),ranges:[[0,n],[i,e.length]]}:{res:e.slice(n),ranges:[[0,n]]}:i?{res:e.slice(0,i),ranges:[[i,e.length]]}:{res:e,ranges:[]}}return{res:"",ranges:[]}}function X(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};function n(t){return null!=t}var i=Object.prototype.hasOwnProperty;function o(t){return"string"==typeof t}if(void 0===e)throw new Error("string-remove-duplicate-heads-tails: [THROW_ID_01] The input is missing!");if("string"!=typeof e)return e;if(n(r)&&!K(r))throw new Error("string-remove-duplicate-heads-tails: [THROW_ID_03] The given options are not a plain object but ".concat(t(r),"!"));if(n(r)&&i.call(r,"heads")){if(!v(r.heads).every((function(t){return o(t)})))throw new Error("string-remove-duplicate-heads-tails: [THROW_ID_04] The opts.heads contains elements which are not string-type!");o(r.heads)&&(r.heads=v(r.heads))}if(n(r)&&i.call(r,"tails")){if(!v(r.tails).every((function(t){return o(t)})))throw new Error("string-remove-duplicate-heads-tails: [THROW_ID_05] The opts.tails contains elements which are not string-type!");o(r.tails)&&(r.tails=v(r.tails))}var s=Q(e).res;if(0===s.length)return e;e=s;var c={heads:["{{"],tails:["}}"]},u=a(a({},c),r);u.heads=u.heads.map((function(t){return t.trim()})),u.tails=u.tails.map((function(t){return t.trim()}));var l=!1,f=!1,h=new C({limitToBeAddedWhitespace:!0}),g=new C({limitToBeAddedWhitespace:!0}),p=!0,d=!0,y="";function m(t,e){var r;return A(t,0,e.heads,{trimBeforeMatching:!0,cb:function(t,e,n){return r=n,!0},relaxedApi:!0})&&A(t,r,e.tails,{trimBeforeMatching:!0,cb:function(t,e,n){return r=n,!0},relaxedApi:!0})?t.slice(r):t}for(;e!==m(e,u);)e=Q(m(e,u)).res;function b(t,e){var r;return O(t,t.length-1,e.tails,{trimBeforeMatching:!0,cb:function(t,e,n){return r=n,!0},relaxedApi:!0})&&O(t,r,e.heads,{trimBeforeMatching:!0,cb:function(t,e,n){return r=n,!0},relaxedApi:!0})?t.slice(0,r+1):t}for(;e!==b(e,u);)e=Q(b(e,u)).res;if(!(u.heads.length&&A(e,0,u.heads,{trimBeforeMatching:!0,relaxedApi:!0})&&u.tails.length&&O(e,e.length-1,u.tails,{trimBeforeMatching:!0,relaxedApi:!0})))return Q(e).res;for(var w=0,_=e.length;w<_;w++)if(""===e[w].trim());else{var T=void 0,W=A(e,w,u.heads,{trimBeforeMatching:!0,cb:function(t,e,r){return T=r,!0},relaxedApi:!0});if(W){d=!0,p&&(p=!0);var I=void 0,j=A(e,T,u.tails,{trimBeforeMatching:!0,cb:function(t,e,r){return I=r,!0},relaxedApi:!0});j&&h.push(w,I),g.current()&&l&&"tails"!==y&&h.push(g.current()),l||g.current()&&(h.push(g.current()),g.wipe()),g.push(w,T),y="heads",w=T-1;continue}var E=A(e,w,u.tails,{trimBeforeMatching:!0,cb:function(t,r,a){return T=n(a)?a:e.length,!0},relaxedApi:!0});if(E){d=!0,p?("heads"===y&&g.wipe(),p=!1):g.push(w,T),y="tails",w=T-1;continue}p&&(p=!0),d&&!l?(l=!0,d=!1):d&&!f?(f=!0,p=!0,d=!1,"heads"===y&&g.wipe()):d&&f&&g.wipe()}return g.current()&&h.push(g.current()),h.current()?P(e,h.current()).trim():e.trim()}var Y=Object.prototype.hasOwnProperty;function Z(t){return"string"==typeof t}function tt(t){return"boolean"==typeof t}function et(t){return null===t}function rt(e){return e&&"object"===t(e)&&!Array.isArray(e)}function nt(t){return null!=t}function at(t){return Z(t)?t.trim():t}function it(t){if("string"==typeof t&&t.length>0&&-1!==t.indexOf("."))for(var e=0,r=t.length;e<r;e++)if("."===t[e])return t.slice(e+1);return t}function ot(t){if("string"==typeof t&&t.length>0&&-1!==t.indexOf("."))for(var e=t.length;e--;)if("."===t[e])return t.slice(0,e);return t}function st(t){if("string"==typeof t&&t.length>0&&-1!==t.indexOf("."))for(var e=t.length;e--;)if("."===t[e])return t.slice(e+1);return t}function ct(t,e){return!("string"!=typeof t||!t.trim())&&!!(t.includes(e.heads)||t.includes(e.tails)||Z(e.headsNoWrap)&&e.headsNoWrap.length>0&&t.includes(e.headsNoWrap)||Z(e.tailsNoWrap)&&e.tailsNoWrap.length>0&&t.includes(e.tailsNoWrap))}function ut(t,e,r){var n,a;return"string"==typeof t&&t.length>0&&A(t,0,e,{trimBeforeMatching:!0,cb:function(t,e,r){return n=r,!0}})&&O(t,t.length-1,r,{trimBeforeMatching:!0,cb:function(t,e,r){return a=r+1,!0}})?t.slice(n,a):t}function lt(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>5?arguments[5]:void 0;if(e.wrapHeadsWith||(e.wrapHeadsWith=""),e.wrapTailsWith||(e.wrapTailsWith=""),Z(t)&&!r&&e.wrapGlobalFlipSwitch&&!e.dontWrapVars.some((function(t){return y.isMatch(n,t)}))&&(!e.preventDoubleWrapping||e.preventDoubleWrapping&&Z(t)&&!t.includes(e.wrapHeadsWith)&&!t.includes(e.wrapTailsWith)))return e.wrapHeadsWith+t+e.wrapTailsWith;if(r){if(!Z(t))return t;var a=X(t,{heads:e.wrapHeadsWith,tails:e.wrapTailsWith});return Z(a)?ut(a,e.wrapHeadsWith,e.wrapTailsWith):a}return t}function ft(t,e,r,n){var a;if(-1!==r.indexOf(".")){var i=r,o=!0;if(n.lookForDataContainers&&"string"==typeof n.dataContainerIdentifierTails&&n.dataContainerIdentifierTails.length>0&&!i.endsWith(n.dataContainerIdentifierTails)){var s=m.get(t,i+n.dataContainerIdentifierTails);rt(s)&&m.get(s,e)&&(a=m.get(s,e),o=!1)}for(;o&&-1!==i.indexOf(".");){if(st(i=ot(i))===e)throw new Error('json-variables/findValues(): [THROW_ID_20] While trying to resolve: "'.concat(e,'" at path "').concat(r,'", we encountered a closed loop. The parent key "').concat(st(i),'" is called the same as the variable "').concat(e,"\" we're looking for."));if(n.lookForDataContainers&&"string"==typeof n.dataContainerIdentifierTails&&n.dataContainerIdentifierTails.length>0&&!i.endsWith(n.dataContainerIdentifierTails)){var c=m.get(t,i+n.dataContainerIdentifierTails);rt(c)&&m.get(c,e)&&(a=m.get(c,e),o=!1)}if(void 0===a){var u=m.get(t,i);rt(u)&&m.get(u,e)&&(a=m.get(u,e),o=!1)}}}if(void 0===a){var l=m.get(t,e);void 0!==l&&(a=l)}if(void 0===a)if(-1===e.indexOf(".")){var f=j(t,e);if(f.length>0)for(var h=0,g=f.length;h<g;h++){if(Z(f[h].val)||tt(f[h].val)||et(f[h].val)){a=f[h].val;break}if("number"==typeof f[h].val){a=String(f[h].val);break}if(Array.isArray(f[h].val)){a=f[h].val.join("");break}throw new Error('json-variables/findValues(): [THROW_ID_21] While trying to resolve: "'.concat(e,'" at path "').concat(r,'", we actually found the key named ').concat(e,", but it was not equal to a string but to:\n").concat(JSON.stringify(f[h],null,4),"\nWe can't resolve a string with that! It should be a string."))}}else{var p=j(t,function(t){if("string"==typeof t&&t.length>0&&-1!==t.indexOf("."))for(var e=0,r=t.length;e<r;e++)if("."===t[e])return t.slice(0,e);return t}(e));if(p.length>0)for(var d=0,y=p.length;d<y;d++){var v=m.get(p[d].val,it(e));v&&Z(v)&&(a=v)}}return a}function ht(t,e,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(a.includes(r)){var i="";if(a.length>1){var o=" â†’\n";i=a.reduce((function(t,e,n){return t+(0===n?"":o)+(e===r?"ðŸ’¥ ":"  ")+e})," Here's the path we travelled up until we hit the recursion:\n\n"),i+="".concat(o,"ðŸ’¥ ").concat(r)}throw new Error('json-variables/resolveString(): [THROW_ID_19] While trying to resolve: "'.concat(e,'" at path "').concat(r,'", we encountered a closed loop, the key is referencing itself."').concat(i))}var s={},c=Array.from(a);c.push(r);var u,l=new C;function f(a,i,o){for(var u=0,f=a.length;u<f;u++){var h=a[u],g=e.slice(h.headsEndAt,h.tailsStartAt);if(0===g.length)l.push(h.headsStartAt,h.tailsEndAt);else if(Y.call(s,g)&&Z(s[g]))l.push(h.headsStartAt,h.tailsEndAt,s[g]);else{var p=ft(t,g.trim(),r,n);if(void 0===p)if(!0===n.allowUnresolved)p="";else{if("string"!=typeof n.allowUnresolved)throw new Error("json-variables/processHeadsAndTails(): [THROW_ID_18] We couldn't find the value to resolve the variable ".concat(e.slice(h.headsEndAt,h.tailsStartAt),". We're at path: \"").concat(r,'".'));p=n.allowUnresolved}if(!o&&n.throwWhenNonStringInsertedInString&&!Z(p))throw new Error("json-variables/processHeadsAndTails(): [THROW_ID_23] While resolving the variable ".concat(e.slice(h.headsEndAt,h.tailsStartAt)," at path ").concat(r,", it resolved into a non-string value, ").concat(JSON.stringify(p,null,4),'. This is happening because options setting "throwWhenNonStringInsertedInString" is active (set to "true").'));if(tt(p)){if(n.resolveToBoolIfAnyValuesContainBool)return l=void 0,!n.resolveToFalseIfAnyValuesContainBool&&p;p=""}else{if(et(p)&&o)return l=void 0,p;p=Array.isArray(p)?String(p.join("")):et(p)?"":String(p)}var d=r.includes(".")?"".concat(ot(r),".").concat(g):g;if(ct(p,n)){var y=lt(ht(t,p,d,n,c),n,i,c,d,g.trim());Z(y)&&l.push(h.headsStartAt,h.tailsEndAt,y)}else{s[g]=p;var m=lt(p,n,i,c,d,g.trim());Z(m)&&l.push(h.headsStartAt,h.tailsEndAt,m)}}}}try{u=I(e,n.heads,n.tails,{source:"",throwWhenSomethingWrongIsDetected:!1})}catch(t){throw new Error('json-variables/resolveString(): [THROW_ID_17] While trying to resolve string: "'.concat(e,'" at path ').concat(r,", something wrong with heads and tails was detected! Here's the internal error message:\n").concat(t))}var h=!1;1===u.length&&""===P(e,[u[0].headsStartAt,u[0].tailsEndAt]).trim()&&(h=!0);var g=f(u,!1,h);if(tt(g))return g;if(et(g))return g;try{u=I(e,n.headsNoWrap,n.tailsNoWrap,{source:"",throwWhenSomethingWrongIsDetected:!1})}catch(t){throw new Error('json-variables/resolveString(): [THROW_ID_22] While trying to resolve string: "'.concat(e,'" at path ').concat(r,", something wrong with no-wrap heads and no-wrap tails was detected! Here's the internal error message:\n").concat(t))}1===u.length&&""===P(e,[u[0].headsStartAt,u[0].tailsEndAt]).trim()&&(h=!0);var p=f(u,!0,h);return tt(p)||et(p)?p:l&&l.current()?P(e,l.current()):e}return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!arguments.length)throw new Error("json-variables/jsonVariables(): [THROW_ID_01] Alas! Inputs are missing!");if(!rt(e))throw new TypeError("json-variables/jsonVariables(): [THROW_ID_02] Alas! The input must be a plain object! Currently it's: ".concat(Array.isArray(e)?"array":t(e)));if(!rt(r))throw new TypeError("json-variables/jsonVariables(): [THROW_ID_03] Alas! An Optional Options Object must be a plain object! Currently it's: ".concat(Array.isArray(r)?"array":t(r)));var n,i,o,s={heads:"%%_",tails:"_%%",headsNoWrap:"%%-",tailsNoWrap:"-%%",lookForDataContainers:!0,dataContainerIdentifierTails:"_data",wrapHeadsWith:"",wrapTailsWith:"",dontWrapVars:[],preventDoubleWrapping:!0,wrapGlobalFlipSwitch:!0,noSingleMarkers:!1,resolveToBoolIfAnyValuesContainBool:!0,resolveToFalseIfAnyValuesContainBool:!0,throwWhenNonStringInsertedInString:!1,allowUnresolved:!1},c=a(a({},s),r);if(c.dontWrapVars?Array.isArray(c.dontWrapVars)||(c.dontWrapVars=v(c.dontWrapVars)):c.dontWrapVars=[],c.dontWrapVars.length>0&&!c.dontWrapVars.every((function(t,e){return!!Z(t)||(n=t,i=e,!1)})))throw new Error('json-variables/jsonVariables(): [THROW_ID_05] Alas! All variable names set in opts.dontWrapVars should be of a string type. Computer detected a value "'.concat(n,'" at index ').concat(i,", which is not string but ").concat(Array.isArray(n)?"array":t(n),"!"));if(""===c.heads)throw new Error("json-variables/jsonVariables(): [THROW_ID_06] Alas! opts.heads are empty!");if(""===c.tails)throw new Error("json-variables/jsonVariables(): [THROW_ID_07] Alas! opts.tails are empty!");if(c.lookForDataContainers&&""===c.dataContainerIdentifierTails)throw new Error("json-variables/jsonVariables(): [THROW_ID_08] Alas! opts.dataContainerIdentifierTails is empty!");if(c.heads===c.tails)throw new Error("json-variables/jsonVariables(): [THROW_ID_09] Alas! opts.heads and opts.tails can't be equal!");if(c.heads===c.headsNoWrap)throw new Error("json-variables/jsonVariables(): [THROW_ID_10] Alas! opts.heads and opts.headsNoWrap can't be equal!");if(c.tails===c.tailsNoWrap)throw new Error("json-variables/jsonVariables(): [THROW_ID_11] Alas! opts.tails and opts.tailsNoWrap can't be equal!");if(""===c.headsNoWrap)throw new Error("json-variables/jsonVariables(): [THROW_ID_12] Alas! opts.headsNoWrap is an empty string!");if(""===c.tailsNoWrap)throw new Error("json-variables/jsonVariables(): [THROW_ID_13] Alas! opts.tailsNoWrap is an empty string!");if(c.headsNoWrap===c.tailsNoWrap)throw new Error("json-variables/jsonVariables(): [THROW_ID_14] Alas! opts.headsNoWrap and opts.tailsNoWrap can't be equal!");return g(e,(function(t,r,n){if(nt(r)&&ct(t,c))throw new Error("json-variables/jsonVariables(): [THROW_ID_15] Alas! Object keys can't contain variables!\nPlease check the following key: ".concat(t));if(""===(o=void 0!==r?r:t))return o;if(0!==c.heads.length&&at(o)===at(c.heads)||0!==c.tails.length&&at(o)===at(c.tails)||0!==c.headsNoWrap.length&&at(o)===at(c.headsNoWrap)||0!==c.tailsNoWrap.length&&at(o)===at(c.tailsNoWrap)){if(!c.noSingleMarkers)return o;throw new Error("json-variables/jsonVariables(): [THROW_ID_16] Alas! While processing the input, we stumbled upon ".concat(at(o)," which is equal to ").concat(at(o)===at(c.heads)?"heads":"").concat(at(o)===at(c.tails)?"tails":"").concat(Z(c.headsNoWrap)&&at(o)===at(c.headsNoWrap)?"headsNoWrap":"").concat(Z(c.tailsNoWrap)&&at(o)===at(c.tailsNoWrap)?"tailsNoWrap":"",'. If you wouldn\'t have set opts.noSingleMarkers to "true" this error would not happen and computer would have left the current element (').concat(at(o),") alone"))}return Z(o)&&ct(o,c)?ht(e,o,n.path,c):o}))}}));
