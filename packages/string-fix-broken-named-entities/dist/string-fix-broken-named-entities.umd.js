/**
 * string-fix-broken-named-entities
 * Finds and fixes common and not so common broken named HTML entities, returns ranges array of fixes
 * Version: 2.1.6
 * Author: Roy Revelt, Codsen Ltd
 * License: MIT
 * Homepage: https://gitlab.com/codsen/codsen/tree/master/packages/string-fix-broken-named-entities
 */

!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(e=e||self).stringFixBrokenNamedEntities=r()}(this,function(){"use strict";function e(r){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(r)}function r(e){return function(e){if(Array.isArray(e)){for(var r=0,t=new Array(e.length);r<e.length;r++)t[r]=e[r];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var t="[object Object]";var n,o,a=Function.prototype,i=Object.prototype,s=a.toString,c=i.hasOwnProperty,l=s.call(Object),u=i.toString,p=(n=Object.getPrototypeOf,o=Object,function(e){return n(o(e))});var f=function(e){if(!function(e){return!!e&&"object"==typeof e}(e)||u.call(e)!=t||function(e){var r=!1;if(null!=e&&"function"!=typeof e.toString)try{r=!!(e+"")}catch(e){}return r}(e))return!1;var r=p(e);if(null===r)return!0;var n=c.call(r,"constructor")&&r.constructor;return"function"==typeof n&&n instanceof n&&s.call(n)==l},g=function(e,r){if(r){if("object"!=typeof r)throw new TypeError(String(r)+" is not an object. Expected an object that has boolean `includeZero` property.");if("includeZero"in r){if("boolean"!=typeof r.includeZero)throw new TypeError(String(r.includeZero)+" is neither true nor false. `includeZero` option must be a Boolean value.");if(r.includeZero&&0===e)return!0}}return Number.isSafeInteger(e)&&e>=1},h="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function d(e,r){return e(r={exports:{}},r.exports),r.exports}var m=d(function(e,r){(r=e.exports=function(e){return e+r.suffix(+e)}).suffix=function(e){return e%=100,1===Math.floor(e/10)?"th":e%10==1?"st":e%10==2?"nd":e%10==3?"rd":"th"}}),y=(m.suffix,d(function(e,r){var t,n,o,a,i,s,c,l,u,p,f,g,d,m,y,b,v,w,q,S;e.exports=(t="function"==typeof Promise,n="object"==typeof self?self:h,o="undefined"!=typeof Symbol,a="undefined"!=typeof Map,i="undefined"!=typeof Set,s="undefined"!=typeof WeakMap,c="undefined"!=typeof WeakSet,l="undefined"!=typeof DataView,u=o&&void 0!==Symbol.iterator,p=o&&void 0!==Symbol.toStringTag,f=i&&"function"==typeof Set.prototype.entries,g=a&&"function"==typeof Map.prototype.entries,d=f&&Object.getPrototypeOf((new Set).entries()),m=g&&Object.getPrototypeOf((new Map).entries()),y=u&&"function"==typeof Array.prototype[Symbol.iterator],b=y&&Object.getPrototypeOf([][Symbol.iterator]()),v=u&&"function"==typeof String.prototype[Symbol.iterator],w=v&&Object.getPrototypeOf(""[Symbol.iterator]()),q=8,S=-1,function(e){var r=typeof e;if("object"!==r)return r;if(null===e)return"null";if(e===n)return"global";if(Array.isArray(e)&&(!1===p||!(Symbol.toStringTag in e)))return"Array";if("object"==typeof window&&null!==window){if("object"==typeof window.location&&e===window.location)return"Location";if("object"==typeof window.document&&e===window.document)return"Document";if("object"==typeof window.navigator){if("object"==typeof window.navigator.mimeTypes&&e===window.navigator.mimeTypes)return"MimeTypeArray";if("object"==typeof window.navigator.plugins&&e===window.navigator.plugins)return"PluginArray"}if(("function"==typeof window.HTMLElement||"object"==typeof window.HTMLElement)&&e instanceof window.HTMLElement){if("BLOCKQUOTE"===e.tagName)return"HTMLQuoteElement";if("TD"===e.tagName)return"HTMLTableDataCellElement";if("TH"===e.tagName)return"HTMLTableHeaderCellElement"}}var o=p&&e[Symbol.toStringTag];if("string"==typeof o)return o;var u=Object.getPrototypeOf(e);return u===RegExp.prototype?"RegExp":u===Date.prototype?"Date":t&&u===Promise.prototype?"Promise":i&&u===Set.prototype?"Set":a&&u===Map.prototype?"Map":c&&u===WeakSet.prototype?"WeakSet":s&&u===WeakMap.prototype?"WeakMap":l&&u===DataView.prototype?"DataView":a&&u===m?"Map Iterator":i&&u===d?"Set Iterator":y&&u===b?"Array Iterator":v&&u===w?"String Iterator":null===u?"Object":Object.prototype.toString.call(e).slice(q,S)})}));function b(e,r,t){if(r!=r)return function(e,r,t,n){for(var o=e.length,a=t+(n?1:-1);n?a--:++a<o;)if(r(e[a],a,e))return a;return-1}(e,w,t);for(var n=t-1,o=e.length;++n<o;)if(e[n]===r)return n;return-1}function v(e,r,t,n){for(var o=t-1,a=e.length;++o<a;)if(n(e[o],r))return o;return-1}function w(e){return e!=e}var q=Array.prototype.splice;function S(e,r,t,n){var o,a=n?v:b,i=-1,s=r.length,c=e;for(e===r&&(r=function(e,r){var t=-1,n=e.length;r||(r=Array(n));for(;++t<n;)r[t]=e[t];return r}(r)),t&&(c=function(e,r){for(var t=-1,n=e?e.length:0,o=Array(n);++t<n;)o[t]=r(e[t],t,e);return o}(e,(o=t,function(e){return o(e)})));++i<s;)for(var l=0,u=r[i],p=t?t(u):u;(l=a(c,p,l,n))>-1;)c!==e&&q.call(c,l,1),q.call(e,l,1);return e}var _=function(e,r){return e&&e.length&&r&&r.length?S(e,r):e},A=d(function(e,r){var t=200,n="__lodash_hash_undefined__",o=9007199254740991,a="[object Arguments]",i="[object Boolean]",s="[object Date]",c="[object Function]",l="[object GeneratorFunction]",u="[object Map]",p="[object Number]",f="[object Object]",g="[object RegExp]",d="[object Set]",m="[object String]",y="[object Symbol]",b="[object ArrayBuffer]",v="[object DataView]",w="[object Float32Array]",q="[object Float64Array]",S="[object Int8Array]",_="[object Int16Array]",A="[object Int32Array]",E="[object Uint8Array]",N="[object Uint8ClampedArray]",T="[object Uint16Array]",j="[object Uint32Array]",O=/\w*$/,D=/^\[object .+?Constructor\]$/,L=/^(?:0|[1-9]\d*)$/,k={};k[a]=k["[object Array]"]=k[b]=k[v]=k[i]=k[s]=k[w]=k[q]=k[S]=k[_]=k[A]=k[u]=k[p]=k[f]=k[g]=k[d]=k[m]=k[y]=k[E]=k[N]=k[T]=k[j]=!0,k["[object Error]"]=k[c]=k["[object WeakMap]"]=!1;var x="object"==typeof h&&h&&h.Object===Object&&h,R="object"==typeof self&&self&&self.Object===Object&&self,V=x||R||Function("return this")(),C=r&&!r.nodeType&&r,$=C&&e&&!e.nodeType&&e,P=$&&$.exports===C;function I(e,r){return e.set(r[0],r[1]),e}function B(e,r){return e.add(r),e}function H(e,r,t,n){var o=-1,a=e?e.length:0;for(n&&a&&(t=e[++o]);++o<a;)t=r(t,e[o],o,e);return t}function F(e){var r=!1;if(null!=e&&"function"!=typeof e.toString)try{r=!!(e+"")}catch(e){}return r}function U(e){var r=-1,t=Array(e.size);return e.forEach(function(e,n){t[++r]=[n,e]}),t}function M(e,r){return function(t){return e(r(t))}}function G(e){var r=-1,t=Array(e.size);return e.forEach(function(e){t[++r]=e}),t}var J,W=Array.prototype,z=Function.prototype,K=Object.prototype,Z=V["__core-js_shared__"],Y=(J=/[^.]+$/.exec(Z&&Z.keys&&Z.keys.IE_PROTO||""))?"Symbol(src)_1."+J:"",Q=z.toString,X=K.hasOwnProperty,ee=K.toString,re=RegExp("^"+Q.call(X).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),te=P?V.Buffer:void 0,ne=V.Symbol,oe=V.Uint8Array,ae=M(Object.getPrototypeOf,Object),ie=Object.create,se=K.propertyIsEnumerable,ce=W.splice,le=Object.getOwnPropertySymbols,ue=te?te.isBuffer:void 0,pe=M(Object.keys,Object),fe=$e(V,"DataView"),ge=$e(V,"Map"),he=$e(V,"Promise"),de=$e(V,"Set"),me=$e(V,"WeakMap"),ye=$e(Object,"create"),be=Fe(fe),ve=Fe(ge),we=Fe(he),qe=Fe(de),Se=Fe(me),_e=ne?ne.prototype:void 0,Ae=_e?_e.valueOf:void 0;function Ee(e){var r=-1,t=e?e.length:0;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}function Ne(e){var r=-1,t=e?e.length:0;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}function Te(e){var r=-1,t=e?e.length:0;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}function je(e){this.__data__=new Ne(e)}function Oe(e,r){var t=Me(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&Ge(e)}(e)&&X.call(e,"callee")&&(!se.call(e,"callee")||ee.call(e)==a)}(e)?function(e,r){for(var t=-1,n=Array(e);++t<e;)n[t]=r(t);return n}(e.length,String):[],n=t.length,o=!!n;for(var i in e)!r&&!X.call(e,i)||o&&("length"==i||Be(i,n))||t.push(i);return t}function De(e,r,t){var n=e[r];X.call(e,r)&&Ue(n,t)&&(void 0!==t||r in e)||(e[r]=t)}function Le(e,r){for(var t=e.length;t--;)if(Ue(e[t][0],r))return t;return-1}function ke(e,r,t,n,o,h,D){var L;if(n&&(L=h?n(e,o,h,D):n(e)),void 0!==L)return L;if(!ze(e))return e;var x=Me(e);if(x){if(L=function(e){var r=e.length,t=e.constructor(r);r&&"string"==typeof e[0]&&X.call(e,"index")&&(t.index=e.index,t.input=e.input);return t}(e),!r)return function(e,r){var t=-1,n=e.length;r||(r=Array(n));for(;++t<n;)r[t]=e[t];return r}(e,L)}else{var R=Ie(e),V=R==c||R==l;if(Je(e))return function(e,r){if(r)return e.slice();var t=new e.constructor(e.length);return e.copy(t),t}(e,r);if(R==f||R==a||V&&!h){if(F(e))return h?e:{};if(L=function(e){return"function"!=typeof e.constructor||He(e)?{}:(r=ae(e),ze(r)?ie(r):{});var r}(V?{}:e),!r)return function(e,r){return Ve(e,Pe(e),r)}(e,function(e,r){return e&&Ve(r,Ke(r),e)}(L,e))}else{if(!k[R])return h?e:{};L=function(e,r,t,n){var o=e.constructor;switch(r){case b:return Re(e);case i:case s:return new o(+e);case v:return function(e,r){var t=r?Re(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)}(e,n);case w:case q:case S:case _:case A:case E:case N:case T:case j:return function(e,r){var t=r?Re(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}(e,n);case u:return function(e,r,t){return H(r?t(U(e),!0):U(e),I,new e.constructor)}(e,n,t);case p:case m:return new o(e);case g:return(l=new(c=e).constructor(c.source,O.exec(c))).lastIndex=c.lastIndex,l;case d:return function(e,r,t){return H(r?t(G(e),!0):G(e),B,new e.constructor)}(e,n,t);case y:return a=e,Ae?Object(Ae.call(a)):{}}var a;var c,l}(e,R,ke,r)}}D||(D=new je);var C=D.get(e);if(C)return C;if(D.set(e,L),!x)var $=t?function(e){return function(e,r,t){var n=r(e);return Me(e)?n:function(e,r){for(var t=-1,n=r.length,o=e.length;++t<n;)e[o+t]=r[t];return e}(n,t(e))}(e,Ke,Pe)}(e):Ke(e);return function(e,r){for(var t=-1,n=e?e.length:0;++t<n&&!1!==r(e[t],t,e););}($||e,function(o,a){$&&(o=e[a=o]),De(L,a,ke(o,r,t,n,a,e,D))}),L}function xe(e){return!(!ze(e)||(r=e,Y&&Y in r))&&(We(e)||F(e)?re:D).test(Fe(e));var r}function Re(e){var r=new e.constructor(e.byteLength);return new oe(r).set(new oe(e)),r}function Ve(e,r,t,n){t||(t={});for(var o=-1,a=r.length;++o<a;){var i=r[o],s=n?n(t[i],e[i],i,t,e):void 0;De(t,i,void 0===s?e[i]:s)}return t}function Ce(e,r){var t,n,o=e.__data__;return("string"==(n=typeof(t=r))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t)?o["string"==typeof r?"string":"hash"]:o.map}function $e(e,r){var t=function(e,r){return null==e?void 0:e[r]}(e,r);return xe(t)?t:void 0}Ee.prototype.clear=function(){this.__data__=ye?ye(null):{}},Ee.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Ee.prototype.get=function(e){var r=this.__data__;if(ye){var t=r[e];return t===n?void 0:t}return X.call(r,e)?r[e]:void 0},Ee.prototype.has=function(e){var r=this.__data__;return ye?void 0!==r[e]:X.call(r,e)},Ee.prototype.set=function(e,r){return this.__data__[e]=ye&&void 0===r?n:r,this},Ne.prototype.clear=function(){this.__data__=[]},Ne.prototype.delete=function(e){var r=this.__data__,t=Le(r,e);return!(t<0||(t==r.length-1?r.pop():ce.call(r,t,1),0))},Ne.prototype.get=function(e){var r=this.__data__,t=Le(r,e);return t<0?void 0:r[t][1]},Ne.prototype.has=function(e){return Le(this.__data__,e)>-1},Ne.prototype.set=function(e,r){var t=this.__data__,n=Le(t,e);return n<0?t.push([e,r]):t[n][1]=r,this},Te.prototype.clear=function(){this.__data__={hash:new Ee,map:new(ge||Ne),string:new Ee}},Te.prototype.delete=function(e){return Ce(this,e).delete(e)},Te.prototype.get=function(e){return Ce(this,e).get(e)},Te.prototype.has=function(e){return Ce(this,e).has(e)},Te.prototype.set=function(e,r){return Ce(this,e).set(e,r),this},je.prototype.clear=function(){this.__data__=new Ne},je.prototype.delete=function(e){return this.__data__.delete(e)},je.prototype.get=function(e){return this.__data__.get(e)},je.prototype.has=function(e){return this.__data__.has(e)},je.prototype.set=function(e,r){var n=this.__data__;if(n instanceof Ne){var o=n.__data__;if(!ge||o.length<t-1)return o.push([e,r]),this;n=this.__data__=new Te(o)}return n.set(e,r),this};var Pe=le?M(le,Object):function(){return[]},Ie=function(e){return ee.call(e)};function Be(e,r){return!!(r=null==r?o:r)&&("number"==typeof e||L.test(e))&&e>-1&&e%1==0&&e<r}function He(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||K)}function Fe(e){if(null!=e){try{return Q.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ue(e,r){return e===r||e!=e&&r!=r}(fe&&Ie(new fe(new ArrayBuffer(1)))!=v||ge&&Ie(new ge)!=u||he&&"[object Promise]"!=Ie(he.resolve())||de&&Ie(new de)!=d||me&&"[object WeakMap]"!=Ie(new me))&&(Ie=function(e){var r=ee.call(e),t=r==f?e.constructor:void 0,n=t?Fe(t):void 0;if(n)switch(n){case be:return v;case ve:return u;case we:return"[object Promise]";case qe:return d;case Se:return"[object WeakMap]"}return r});var Me=Array.isArray;function Ge(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}(e.length)&&!We(e)}var Je=ue||function(){return!1};function We(e){var r=ze(e)?ee.call(e):"";return r==c||r==l}function ze(e){var r=typeof e;return!!e&&("object"==r||"function"==r)}function Ke(e){return Ge(e)?Oe(e):function(e){if(!He(e))return pe(e);var r=[];for(var t in Object(e))X.call(e,t)&&"constructor"!=t&&r.push(t);return r}(e)}e.exports=function(e){return ke(e,!0,!0)}});const E=Array.isArray;function N(e){return"string"==typeof e&&e.length>0&&"."===e[0]?e.slice(1):e}function T(e,r){return function e(r,t,n){const o=A(r);let a,i,s,c,l;if((n=Object.assign({depth:-1,path:""},n)).depth+=1,E(o))for(a=0,i=o.length;a<i;a++){const r=`${n.path}.${a}`;void 0!==o[a]?(n.parent=A(o),n.parentType="array",s=e(t(o[a],void 0,Object.assign({},n,{path:N(r)})),t,Object.assign({},n,{path:N(r)})),Number.isNaN(s)&&a<o.length?(o.splice(a,1),a-=1):o[a]=s):o.splice(a,1)}else if(f(o))for(a=0,i=(c=Object.keys(o)).length;a<i;a++){l=c[a];const r=`${n.path}.${l}`;0===n.depth&&null!=l&&(n.topmostKey=l),n.parent=A(o),n.parentType="object",s=e(t(l,o[l],Object.assign({},n,{path:N(r)})),t,Object.assign({},n,{path:N(r)})),Number.isNaN(s)?delete o[l]:o[l]=s}return o}(e,r,{})}var j="__lodash_hash_undefined__",O=9007199254740991,D="[object Function]",L="[object GeneratorFunction]",k=/^\[object .+?Constructor\]$/,x="object"==typeof h&&h&&h.Object===Object&&h,R="object"==typeof self&&self&&self.Object===Object&&self,V=x||R||Function("return this")();function C(e,r){return!!(e?e.length:0)&&function(e,r,t){if(r!=r)return function(e,r,t,n){var o=e.length,a=t+(n?1:-1);for(;n?a--:++a<o;)if(r(e[a],a,e))return a;return-1}(e,I,t);var n=t-1,o=e.length;for(;++n<o;)if(e[n]===r)return n;return-1}(e,r,0)>-1}function $(e,r,t){for(var n=-1,o=e?e.length:0;++n<o;)if(t(r,e[n]))return!0;return!1}function P(e,r){for(var t=-1,n=e?e.length:0,o=Array(n);++t<n;)o[t]=r(e[t],t,e);return o}function I(e){return e!=e}function B(e){return function(r){return e(r)}}function H(e,r){return e.has(r)}var F,U=Array.prototype,M=Function.prototype,G=Object.prototype,J=V["__core-js_shared__"],W=(F=/[^.]+$/.exec(J&&J.keys&&J.keys.IE_PROTO||""))?"Symbol(src)_1."+F:"",z=M.toString,K=G.hasOwnProperty,Z=G.toString,Y=RegExp("^"+z.call(K).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Q=U.splice,X=Math.max,ee=Math.min,re=pe(V,"Map"),te=pe(Object,"create");function ne(e){var r=-1,t=e?e.length:0;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}function oe(e){var r=-1,t=e?e.length:0;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}function ae(e){var r=-1,t=e?e.length:0;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}function ie(e){var r=-1,t=e?e.length:0;for(this.__data__=new ae;++r<t;)this.add(e[r])}function se(e,r){for(var t,n,o=e.length;o--;)if((t=e[o][0])===(n=r)||t!=t&&n!=n)return o;return-1}function ce(e){return!(!ge(e)||(r=e,W&&W in r))&&(fe(e)||function(e){var r=!1;if(null!=e&&"function"!=typeof e.toString)try{r=!!(e+"")}catch(e){}return r}(e)?Y:k).test(function(e){if(null!=e){try{return z.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var r}function le(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=O}(e.length)&&!fe(e)}(e)}(e)?e:[]}function ue(e,r){var t,n,o=e.__data__;return("string"==(n=typeof(t=r))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t)?o["string"==typeof r?"string":"hash"]:o.map}function pe(e,r){var t=function(e,r){return null==e?void 0:e[r]}(e,r);return ce(t)?t:void 0}function fe(e){var r=ge(e)?Z.call(e):"";return r==D||r==L}function ge(e){var r=typeof e;return!!e&&("object"==r||"function"==r)}ne.prototype.clear=function(){this.__data__=te?te(null):{}},ne.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},ne.prototype.get=function(e){var r=this.__data__;if(te){var t=r[e];return t===j?void 0:t}return K.call(r,e)?r[e]:void 0},ne.prototype.has=function(e){var r=this.__data__;return te?void 0!==r[e]:K.call(r,e)},ne.prototype.set=function(e,r){return this.__data__[e]=te&&void 0===r?j:r,this},oe.prototype.clear=function(){this.__data__=[]},oe.prototype.delete=function(e){var r=this.__data__,t=se(r,e);return!(t<0||(t==r.length-1?r.pop():Q.call(r,t,1),0))},oe.prototype.get=function(e){var r=this.__data__,t=se(r,e);return t<0?void 0:r[t][1]},oe.prototype.has=function(e){return se(this.__data__,e)>-1},oe.prototype.set=function(e,r){var t=this.__data__,n=se(t,e);return n<0?t.push([e,r]):t[n][1]=r,this},ae.prototype.clear=function(){this.__data__={hash:new ne,map:new(re||oe),string:new ne}},ae.prototype.delete=function(e){return ue(this,e).delete(e)},ae.prototype.get=function(e){return ue(this,e).get(e)},ae.prototype.has=function(e){return ue(this,e).has(e)},ae.prototype.set=function(e,r){return ue(this,e).set(e,r),this},ie.prototype.add=ie.prototype.push=function(e){return this.__data__.set(e,j),this},ie.prototype.has=function(e){return this.__data__.has(e)};var he=function(e,r){return r=X(void 0===r?e.length-1:r,0),function(){for(var t=arguments,n=-1,o=X(t.length-r,0),a=Array(o);++n<o;)a[n]=t[r+n];n=-1;for(var i=Array(r+1);++n<r;)i[n]=t[n];return i[r]=a,function(e,r,t){switch(t.length){case 0:return e.call(r);case 1:return e.call(r,t[0]);case 2:return e.call(r,t[0],t[1]);case 3:return e.call(r,t[0],t[1],t[2])}return e.apply(r,t)}(e,this,i)}}(function(e){var r=P(e,le);return r.length&&r[0]===e[0]?function(e,r,t){for(var n=t?$:C,o=e[0].length,a=e.length,i=a,s=Array(a),c=1/0,l=[];i--;){var u=e[i];i&&r&&(u=P(u,B(r))),c=ee(u.length,c),s[i]=!t&&(r||o>=120&&u.length>=120)?new ie(i&&u):void 0}u=e[0];var p=-1,f=s[0];e:for(;++p<o&&l.length<c;){var g=u[p],h=r?r(g):g;if(g=t||0!==g?g:0,!(f?H(f,h):n(l,h,t))){for(i=a;--i;){var d=s[i];if(!(d?H(d,h):n(e[i],h,t)))continue e}f&&f.push(h),l.push(g)}}return l}(r):[]});function de(e){return"string"==typeof e?e.length>0?[e]:[]:e}var me=d(function(e){e.exports=function(){var e=Object.prototype.toString;function r(e,r){return null!=e&&Object.prototype.hasOwnProperty.call(e,r)}function t(e){if(!e)return!0;if(o(e)&&0===e.length)return!0;if("string"!=typeof e){for(var t in e)if(r(e,t))return!1;return!0}return!1}function n(r){return e.call(r)}var o=Array.isArray||function(r){return"[object Array]"===e.call(r)};function a(e){var r=parseInt(e);return r.toString()===e?r:e}function i(e){e=e||{};var i=function(e){return Object.keys(i).reduce(function(r,t){return"create"===t?r:("function"==typeof i[t]&&(r[t]=i[t].bind(i,e)),r)},{})};function s(t,n){return e.includeInheritedProps||"number"==typeof n&&Array.isArray(t)||r(t,n)}function c(e,r){if(s(e,r))return e[r]}function l(e,r,t,n){if("number"==typeof r&&(r=[r]),!r||0===r.length)return e;if("string"==typeof r)return l(e,r.split(".").map(a),t,n);var o=r[0],i=c(e,o);return 1===r.length?(void 0!==i&&n||(e[o]=t),i):(void 0===i&&("number"==typeof r[1]?e[o]=[]:e[o]={}),l(e[o],r.slice(1),t,n))}return i.has=function(t,n){if("number"==typeof n?n=[n]:"string"==typeof n&&(n=n.split(".")),!n||0===n.length)return!!t;for(var i=0;i<n.length;i++){var s=a(n[i]);if(!("number"==typeof s&&o(t)&&s<t.length||(e.includeInheritedProps?s in Object(t):r(t,s))))return!1;t=t[s]}return!0},i.ensureExists=function(e,r,t){return l(e,r,t,!0)},i.set=function(e,r,t,n){return l(e,r,t,n)},i.insert=function(e,r,t,n){var a=i.get(e,r);n=~~n,o(a)||(a=[],i.set(e,r,a)),a.splice(n,0,t)},i.empty=function(e,r){var a,c;if(!t(r)&&null!=e&&(a=i.get(e,r))){if("string"==typeof a)return i.set(e,r,"");if(function(e){return"boolean"==typeof e||"[object Boolean]"===n(e)}(a))return i.set(e,r,!1);if("number"==typeof a)return i.set(e,r,0);if(o(a))a.length=0;else{if(!function(e){return"object"==typeof e&&"[object Object]"===n(e)}(a))return i.set(e,r,null);for(c in a)s(a,c)&&delete a[c]}}},i.push=function(e,r){var t=i.get(e,r);o(t)||(t=[],i.set(e,r,t)),t.push.apply(t,Array.prototype.slice.call(arguments,2))},i.coalesce=function(e,r,t){for(var n,o=0,a=r.length;o<a;o++)if(void 0!==(n=i.get(e,r[o])))return n;return t},i.get=function(e,r,t){if("number"==typeof r&&(r=[r]),!r||0===r.length)return e;if(null==e)return t;if("string"==typeof r)return i.get(e,r.split("."),t);var n=a(r[0]),o=c(e,n);return void 0===o?t:1===r.length?o:i.get(e[n],r.slice(1),t)},i.del=function(e,r){if("number"==typeof r&&(r=[r]),null==e)return e;if(t(r))return e;if("string"==typeof r)return i.del(e,r.split("."));var n=a(r[0]);return s(e,n)?1!==r.length?i.del(e[n],r.slice(1)):(o(e)?e.splice(n,1):delete e[n],e):e},i}var s=i();return s.create=i,s.withInheritedProps=i({includeInheritedProps:!0}),s}()}),ye=function(e){var r=e%100;if(r>=10&&r<=20)return"th";var t=e%10;return 1===t?"st":2===t?"nd":3===t?"rd":"th"};function be(e){if("number"!=typeof e)throw new TypeError("Expected Number, got "+typeof e+" "+e);return e+ye(e)}be.indicator=ye;var ve=be,we=/[|\\{}()[\]^$+*?.]/g,qe=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(we,"\\$&")};const Se=new Map;function _e(e,r){const t=Object.assign({caseSensitive:!1},r),n=e+JSON.stringify(t);if(Se.has(n))return Se.get(n);const o="!"===e[0];o&&(e=e.slice(1)),e=qe(e).replace(/\\\*/g,".*");const a=new RegExp(`^${e}$`,t.caseSensitive?"":"i");return a.negated=o,Se.set(n,a),a}var Ae=(e,r,t)=>{if(!Array.isArray(e)||!Array.isArray(r))throw new TypeError(`Expected two arrays, got ${typeof e} ${typeof r}`);if(0===r.length)return e;const n="!"===r[0][0];r=r.map(e=>_e(e,t));const o=[];for(const t of e){let e=n;for(const n of r)n.test(t)&&(e=!n.negated);e&&o.push(t)}return o};function Ee(e,r,t){return function e(r,t,n,o=!0){const a=Object.prototype.hasOwnProperty;function i(e){return null!=e}function s(e){return"Object"===y(e)}function c(e,r){return r=de(r),Array.from(e).filter(e=>!r.some(r=>Ae.isMatch(e,r,{caseSensitive:!0})))}const l=["any","anything","every","everything","all","whatever","whatevs"],u=Array.isArray;if(!i(r))throw new Error("check-types-mini: [THROW_ID_01] First argument is missing!");const p={ignoreKeys:[],ignorePaths:[],acceptArrays:!1,acceptArraysIgnore:[],enforceStrictKeyset:!0,schema:{},msg:"check-types-mini",optsVarName:"opts"};let f;if(f=i(n)&&s(n)?Object.assign({},p,n):Object.assign({},p),i(f.ignoreKeys)&&f.ignoreKeys?f.ignoreKeys=de(f.ignoreKeys):f.ignoreKeys=[],i(f.ignorePaths)&&f.ignorePaths?f.ignorePaths=de(f.ignorePaths):f.ignorePaths=[],i(f.acceptArraysIgnore)&&f.acceptArraysIgnore?f.acceptArraysIgnore=de(f.acceptArraysIgnore):f.acceptArraysIgnore=[],f.msg="string"==typeof f.msg?f.msg.trim():f.msg,":"===f.msg[f.msg.length-1]&&(f.msg=f.msg.slice(0,f.msg.length-1).trim()),f.schema&&(Object.keys(f.schema).forEach(e=>{if(s(f.schema[e])){const r={};T(f.schema[e],(t,n,o)=>{const a=void 0!==n?n:t;return u(a)||s(a)||(r[`${e}.${o.path}`]=a),a}),delete f.schema[e],f.schema=Object.assign(f.schema,r)}}),Object.keys(f.schema).forEach(e=>{u(f.schema[e])||(f.schema[e]=[f.schema[e]]),f.schema[e]=f.schema[e].map(String).map(e=>e.toLowerCase()).map(e=>e.trim())})),i(t)||(t={}),o&&e(f,p,{enforceStrictKeyset:!1},!1),f.enforceStrictKeyset)if(i(f.schema)&&Object.keys(f.schema).length>0){if(0!==c(_(Object.keys(r),Object.keys(t).concat(Object.keys(f.schema))),f.ignoreKeys).length){const e=_(Object.keys(r),Object.keys(t).concat(Object.keys(f.schema)));throw new TypeError(`${f.msg}: ${f.optsVarName}.enforceStrictKeyset is on and the following key${e.length>1?"s":""} ${e.length>1?"are":"is"} not covered by schema and/or reference objects: ${e.join(", ")}`)}}else{if(!(i(t)&&Object.keys(t).length>0))throw new TypeError(`${f.msg}: Both ${f.optsVarName}.schema and reference objects are missing! We don't have anything to match the keys as you requested via opts.enforceStrictKeyset!`);if(0!==c(_(Object.keys(r),Object.keys(t)),f.ignoreKeys).length){const e=_(Object.keys(r),Object.keys(t));throw new TypeError(`${f.msg}: The input object has key${e.length>1?"s":""} which ${e.length>1?"are":"is"} not covered by the reference object: ${e.join(", ")}`)}if(0!==c(_(Object.keys(t),Object.keys(r)),f.ignoreKeys).length){const e=_(Object.keys(t),Object.keys(r));throw new TypeError(`${f.msg}: The reference object has key${e.length>1?"s":""} which ${e.length>1?"are":"is"} not present in the input object: ${e.join(", ")}`)}}const g=[];T(r,(e,n,o)=>{let i=n,c=e;if("array"===o.parentType&&(c=void 0,i=e),u(g)&&g.length&&g.some(e=>o.path.startsWith(e)))return i;if(c&&f.ignoreKeys.some(e=>Ae.isMatch(c,e)))return i;if(f.ignorePaths.some(e=>Ae.isMatch(o.path,e)))return i;const p=!(!s(i)&&!u(i)&&u(o.parent));let h=!1;s(f.schema)&&a.call(f.schema,me.get(o.path))&&(h=!0);let d=!1;if(s(t)&&me.has(t,me.get(o.path))&&(d=!0),f.enforceStrictKeyset&&p&&!h&&!d)throw new TypeError(`${f.msg}: ${f.optsVarName}.${o.path} is neither covered by reference object (second input argument), nor ${f.optsVarName}.schema! To stop this error, turn off ${f.optsVarName}.enforceStrictKeyset or provide some type reference (2nd argument or ${f.optsVarName}.schema).\n\nDebug info:\n\nobj = ${JSON.stringify(r,null,4)}\n\nref = ${JSON.stringify(t,null,4)}\n\ninnerObj = ${JSON.stringify(o,null,4)}\n\nopts = ${JSON.stringify(f,null,4)}\n\ncurrent = ${JSON.stringify(i,null,4)}\n\n`);if(h){const e=de(f.schema[o.path]).map(String).map(e=>e.toLowerCase());if(me.set(f.schema,o.path,e),he(e,l).length)g.push(o.path);else if(!0!==i&&!1!==i&&!e.includes(y(i).toLowerCase())||(!0===i||!1===i)&&!e.includes(String(i))&&!e.includes("boolean")){if(!u(i)||!f.acceptArrays)throw new TypeError(`${f.msg}: ${f.optsVarName}.${o.path} was customised to ${"string"!==y(i)?'"':""}${JSON.stringify(i,null,0)}${"string"!==y(i)?'"':""} (type: ${y(i).toLowerCase()}) which is not among the allowed types in schema (which is equal to ${JSON.stringify(e,null,0)})`);for(let r=0,t=i.length;r<t;r++)if(!e.includes(y(i[r]).toLowerCase()))throw new TypeError(`${f.msg}: ${f.optsVarName}.${o.path}.${r}, the ${ve(r+1)} element (equal to ${JSON.stringify(i[r],null,0)}) is of a type ${y(i[r]).toLowerCase()}, but only the following are allowed by the ${f.optsVarName}.schema: ${e.join(", ")}`)}}else if(d){const r=me.get(t,o.path);if(f.acceptArrays&&u(i)&&!f.acceptArraysIgnore.includes(e)){if(!i.every(r=>y(r).toLowerCase()===y(t[e]).toLowerCase()))throw new TypeError(`${f.msg}: ${f.optsVarName}.${o.path} was customised to be array, but not all of its elements are ${y(t[e]).toLowerCase()}-type`)}else if(y(i)!==y(r))throw new TypeError(`${f.msg}: ${f.optsVarName}.${o.path} was customised to ${"string"===y(i).toLowerCase()?"":'"'}${JSON.stringify(i,null,0)}${"string"===y(i).toLowerCase()?"":'"'} which is not ${y(r).toLowerCase()} but ${y(i).toLowerCase()}`)}return i})}(e,r,t)}Ae.isMatch=((e,r,t)=>{const n=_e(r,t),o=n.test(e);return n.negated?!o:o});const Ne=Array.isArray;function Te(e,r){if(!Ne(e))throw new TypeError(`ranges-sort: [THROW_ID_01] Input must be an array, consisting of range arrays! Currently its type is: ${typeof e}, equal to: ${JSON.stringify(e,null,4)}`);if(0===e.length)return e;const t={strictlyTwoElementsInRangeArrays:!1,progressFn:null},n=Object.assign({},t,r);let o,a;if(Ee(n,t,{msg:"ranges-sort: [THROW_ID_02*]",schema:{progressFn:["function","false","null"]}}),n.strictlyTwoElementsInRangeArrays&&!e.every((e,r)=>2===e.length||(o=r,a=e.length,!1)))throw new TypeError(`ranges-sort: [THROW_ID_03] The first argument should be an array and must consist of arrays which are natural number indexes representing TWO string index ranges. However, ${m(o)} range (${JSON.stringify(e[o],null,4)}) has not two but ${a} elements!`);if(!e.every((e,r)=>!(!g(e[0],{includeZero:!0})||!g(e[1],{includeZero:!0}))||(o=r,!1)))throw new TypeError(`ranges-sort: [THROW_ID_04] The first argument should be an array and must consist of arrays which are natural number indexes representing string index ranges. However, ${m(o)} range (${JSON.stringify(e[o],null,4)}) does not consist of only natural numbers!`);const i=e.length*e.length;let s=0;return Array.from(e).sort((e,r)=>(n.progressFn&&(s++,n.progressFn(Math.floor(100*s/i))),e[0]===r[0]?e[1]<r[1]?-1:e[1]>r[1]?1:0:e[0]<r[0]?-1:1))}var je={A:{E:["AElig"],M:["AMP"],a:["Aacute"],b:["Abreve"],c:["Acirc","Acy"],f:["Afr"],g:["Agrave"],l:["Alpha"],m:["Amacr"],n:["And"],o:["Aogon","Aopf"],p:["ApplyFunction"],r:["Aring"],s:["Ascr","Assign"],t:["Atilde"],u:["Auml"]},B:{a:["Backslash","Barv","Barwed"],c:["Bcy"],e:["Because","Bernoullis","Beta"],f:["Bfr"],o:["Bopf"],r:["Breve"],s:["Bscr"],u:["Bumpeq"]},C:{H:["CHcy"],O:["COPY"],a:["Cacute","Cap","CapitalDifferentialD","Cayleys"],c:["Ccaron","Ccedil","Ccirc","Cconint"],d:["Cdot"],e:["Cedilla","CenterDot"],f:["Cfr"],h:["Chi"],i:["CircleDot","CircleMinus","CirclePlus","CircleTimes"],l:["ClockwiseContourIntegral","CloseCurlyDoubleQuote","CloseCurlyQuote"],o:["Colon","Colone","Congruent","Conint","ContourIntegral","Copf","Coproduct","CounterClockwiseContourIntegral"],r:["Cross"],s:["Cscr"],u:["Cup","CupCap"]},D:{D:["DD","DDotrahd"],J:["DJcy"],S:["DScy"],Z:["DZcy"],a:["Dagger","Darr","Dashv"],c:["Dcaron","Dcy"],e:["Del","Delta"],f:["Dfr"],i:["DiacriticalAcute","DiacriticalDot","DiacriticalDoubleAcute","DiacriticalGrave","DiacriticalTilde","Diamond","DifferentialD"],o:["Dopf","Dot","DotDot","DotEqual","DoubleContourIntegral","DoubleDot","DoubleDownArrow","DoubleLeftArrow","DoubleLeftRightArrow","DoubleLeftTee","DoubleLongLeftArrow","DoubleLongLeftRightArrow","DoubleLongRightArrow","DoubleRightArrow","DoubleRightTee","DoubleUpArrow","DoubleUpDownArrow","DoubleVerticalBar","DownArrow","DownArrowBar","DownArrowUpArrow","DownBreve","DownLeftRightVector","DownLeftTeeVector","DownLeftVector","DownLeftVectorBar","DownRightTeeVector","DownRightVector","DownRightVectorBar","DownTee","DownTeeArrow","Downarrow"],s:["Dscr","Dstrok"]},E:{N:["ENG"],T:["ETH"],a:["Eacute"],c:["Ecaron","Ecirc","Ecy"],d:["Edot"],f:["Efr"],g:["Egrave"],l:["Element"],m:["Emacr","EmptySmallSquare","EmptyVerySmallSquare"],o:["Eogon","Eopf"],p:["Epsilon"],q:["Equal","EqualTilde","Equilibrium"],s:["Escr","Esim"],t:["Eta"],u:["Euml"],x:["Exists","ExponentialE"]},F:{c:["Fcy"],f:["Ffr"],i:["FilledSmallSquare","FilledVerySmallSquare"],o:["Fopf","ForAll","Fouriertrf"],s:["Fscr"]},G:{J:["GJcy"],T:["GT"],a:["Gamma","Gammad"],b:["Gbreve"],c:["Gcedil","Gcirc","Gcy"],d:["Gdot"],f:["Gfr"],g:["Gg"],o:["Gopf"],r:["GreaterEqual","GreaterEqualLess","GreaterFullEqual","GreaterGreater","GreaterLess","GreaterSlantEqual","GreaterTilde"],s:["Gscr"],t:["Gt"]},H:{A:["HARDcy"],a:["Hacek","Hat"],c:["Hcirc"],f:["Hfr"],i:["HilbertSpace"],o:["Hopf","HorizontalLine"],s:["Hscr","Hstrok"],u:["HumpDownHump","HumpEqual"]},I:{E:["IEcy"],J:["IJlig"],O:["IOcy"],a:["Iacute"],c:["Icirc","Icy"],d:["Idot"],f:["Ifr"],g:["Igrave"],m:["Im","Imacr","ImaginaryI","Implies"],n:["Int","Integral","Intersection","InvisibleComma","InvisibleTimes"],o:["Iogon","Iopf","Iota"],s:["Iscr"],t:["Itilde"],u:["Iukcy","Iuml"]},J:{c:["Jcirc","Jcy"],f:["Jfr"],o:["Jopf"],s:["Jscr","Jsercy"],u:["Jukcy"]},K:{H:["KHcy"],J:["KJcy"],a:["Kappa"],c:["Kcedil","Kcy"],f:["Kfr"],o:["Kopf"],s:["Kscr"]},L:{J:["LJcy"],T:["LT"],a:["Lacute","Lambda","Lang","Laplacetrf","Larr"],c:["Lcaron","Lcedil","Lcy"],e:["LeftAngleBracket","LeftArrow","LeftArrowBar","LeftArrowRightArrow","LeftCeiling","LeftDoubleBracket","LeftDownTeeVector","LeftDownVector","LeftDownVectorBar","LeftFloor","LeftRightArrow","LeftRightVector","LeftTee","LeftTeeArrow","LeftTeeVector","LeftTriangle","LeftTriangleBar","LeftTriangleEqual","LeftUpDownVector","LeftUpTeeVector","LeftUpVector","LeftUpVectorBar","LeftVector","LeftVectorBar","Leftarrow","Leftrightarrow","LessEqualGreater","LessFullEqual","LessGreater","LessLess","LessSlantEqual","LessTilde"],f:["Lfr"],l:["Ll","Lleftarrow"],m:["Lmidot"],o:["LongLeftArrow","LongLeftRightArrow","LongRightArrow","Longleftarrow","Longleftrightarrow","Longrightarrow","Lopf","LowerLeftArrow","LowerRightArrow"],s:["Lscr","Lsh","Lstrok"],t:["Lt"]},M:{a:["Map"],c:["Mcy"],e:["MediumSpace","Mellintrf"],f:["Mfr"],i:["MinusPlus"],o:["Mopf"],s:["Mscr"],u:["Mu"]},N:{J:["NJcy"],a:["Nacute"],c:["Ncaron","Ncedil","Ncy"],e:["NegativeMediumSpace","NegativeThickSpace","NegativeThinSpace","NegativeVeryThinSpace","NestedGreaterGreater","NestedLessLess","NewLine"],f:["Nfr"],o:["NoBreak","NonBreakingSpace","Nopf","Not","NotCongruent","NotCupCap","NotDoubleVerticalBar","NotElement","NotEqual","NotEqualTilde","NotExists","NotGreater","NotGreaterEqual","NotGreaterFullEqual","NotGreaterGreater","NotGreaterLess","NotGreaterSlantEqual","NotGreaterTilde","NotHumpDownHump","NotHumpEqual","NotLeftTriangle","NotLeftTriangleBar","NotLeftTriangleEqual","NotLess","NotLessEqual","NotLessGreater","NotLessLess","NotLessSlantEqual","NotLessTilde","NotNestedGreaterGreater","NotNestedLessLess","NotPrecedes","NotPrecedesEqual","NotPrecedesSlantEqual","NotReverseElement","NotRightTriangle","NotRightTriangleBar","NotRightTriangleEqual","NotSquareSubset","NotSquareSubsetEqual","NotSquareSuperset","NotSquareSupersetEqual","NotSubset","NotSubsetEqual","NotSucceeds","NotSucceedsEqual","NotSucceedsSlantEqual","NotSucceedsTilde","NotSuperset","NotSupersetEqual","NotTilde","NotTildeEqual","NotTildeFullEqual","NotTildeTilde","NotVerticalBar"],s:["Nscr"],t:["Ntilde"],u:["Nu"]},O:{E:["OElig"],a:["Oacute"],c:["Ocirc","Ocy"],d:["Odblac"],f:["Ofr"],g:["Ograve"],m:["Omacr","Omega","Omicron"],o:["Oopf"],p:["OpenCurlyDoubleQuote","OpenCurlyQuote"],r:["Or"],s:["Oscr","Oslash"],t:["Otilde","Otimes"],u:["Ouml"],v:["OverBar","OverBrace","OverBracket","OverParenthesis"]},P:{a:["PartialD"],c:["Pcy"],f:["Pfr"],h:["Phi"],i:["Pi"],l:["PlusMinus"],o:["Poincareplane","Popf"],r:["Pr","Precedes","PrecedesEqual","PrecedesSlantEqual","PrecedesTilde","Prime","Product","Proportion","Proportional"],s:["Pscr","Psi"]},Q:{U:["QUOT"],f:["Qfr"],o:["Qopf"],s:["Qscr"]},R:{B:["RBarr"],E:["REG"],a:["Racute","Rang","Rarr","Rarrtl"],c:["Rcaron","Rcedil","Rcy"],e:["Re","ReverseElement","ReverseEquilibrium","ReverseUpEquilibrium"],f:["Rfr"],h:["Rho"],i:["RightAngleBracket","RightArrow","RightArrowBar","RightArrowLeftArrow","RightCeiling","RightDoubleBracket","RightDownTeeVector","RightDownVector","RightDownVectorBar","RightFloor","RightTee","RightTeeArrow","RightTeeVector","RightTriangle","RightTriangleBar","RightTriangleEqual","RightUpDownVector","RightUpTeeVector","RightUpVector","RightUpVectorBar","RightVector","RightVectorBar","Rightarrow"],o:["Ropf","RoundImplies"],r:["Rrightarrow"],s:["Rscr","Rsh"],u:["RuleDelayed"]},S:{H:["SHCHcy","SHcy"],O:["SOFTcy"],a:["Sacute"],c:["Sc","Scaron","Scedil","Scirc","Scy"],f:["Sfr"],h:["ShortDownArrow","ShortLeftArrow","ShortRightArrow","ShortUpArrow"],i:["Sigma"],m:["SmallCircle"],o:["Sopf"],q:["Sqrt","Square","SquareIntersection","SquareSubset","SquareSubsetEqual","SquareSuperset","SquareSupersetEqual","SquareUnion"],s:["Sscr"],t:["Star"],u:["Sub","Subset","SubsetEqual","Succeeds","SucceedsEqual","SucceedsSlantEqual","SucceedsTilde","SuchThat","Sum","Sup","Superset","SupersetEqual","Supset"]},T:{H:["THORN"],R:["TRADE"],S:["TSHcy","TScy"],a:["Tab","Tau"],c:["Tcaron","Tcedil","Tcy"],f:["Tfr"],h:["Therefore","Theta","ThickSpace","ThinSpace"],i:["Tilde","TildeEqual","TildeFullEqual","TildeTilde"],o:["Topf"],r:["TripleDot"],s:["Tscr","Tstrok"]},U:{a:["Uacute","Uarr","Uarrocir"],b:["Ubrcy","Ubreve"],c:["Ucirc","Ucy"],d:["Udblac"],f:["Ufr"],g:["Ugrave"],m:["Umacr"],n:["UnderBar","UnderBrace","UnderBracket","UnderParenthesis","Union","UnionPlus"],o:["Uogon","Uopf"],p:["UpArrow","UpArrowBar","UpArrowDownArrow","UpDownArrow","UpEquilibrium","UpTee","UpTeeArrow","Uparrow","Updownarrow","UpperLeftArrow","UpperRightArrow","Upsi","Upsilon"],r:["Uring"],s:["Uscr"],t:["Utilde"],u:["Uuml"]},V:{D:["VDash"],b:["Vbar"],c:["Vcy"],d:["Vdash","Vdashl"],e:["Vee","Verbar","Vert","VerticalBar","VerticalLine","VerticalSeparator","VerticalTilde","VeryThinSpace"],f:["Vfr"],o:["Vopf"],s:["Vscr"],v:["Vvdash"]},W:{c:["Wcirc"],e:["Wedge"],f:["Wfr"],o:["Wopf"],s:["Wscr"]},X:{f:["Xfr"],i:["Xi"],o:["Xopf"],s:["Xscr"]},Y:{A:["YAcy"],I:["YIcy"],U:["YUcy"],a:["Yacute"],c:["Ycirc","Ycy"],f:["Yfr"],o:["Yopf"],s:["Yscr"],u:["Yuml"]},Z:{H:["ZHcy"],a:["Zacute"],c:["Zcaron","Zcy"],d:["Zdot"],e:["ZeroWidthSpace","Zeta"],f:["Zfr"],o:["Zopf"],s:["Zscr"]},a:{a:["aacute"],b:["abreve"],c:["ac","acE","acd","acirc","acute","acy"],e:["aelig"],f:["af","afr"],g:["agrave"],l:["alefsym","aleph","alpha"],m:["amacr","amalg","amp"],n:["and","andand","andd","andslope","andv","ang","ange","angle","angmsd","angmsdaa","angmsdab","angmsdac","angmsdad","angmsdae","angmsdaf","angmsdag","angmsdah","angrt","angrtvb","angrtvbd","angsph","angst","angzarr"],o:["aogon","aopf"],p:["ap","apE","apacir","ape","apid","apos","approx","approxeq"],r:["aring"],s:["ascr","ast","asymp","asympeq"],t:["atilde"],u:["auml"],w:["awconint","awint"]},b:{N:["bNot"],a:["backcong","backepsilon","backprime","backsim","backsimeq","barvee","barwed","barwedge"],b:["bbrk","bbrktbrk"],c:["bcong","bcy"],d:["bdquo"],e:["becaus","because","bemptyv","bepsi","bernou","beta","beth","between"],f:["bfr"],i:["bigcap","bigcirc","bigcup","bigodot","bigoplus","bigotimes","bigsqcup","bigstar","bigtriangledown","bigtriangleup","biguplus","bigvee","bigwedge"],k:["bkarow"],l:["blacklozenge","blacksquare","blacktriangle","blacktriangledown","blacktriangleleft","blacktriangleright","blank","blk12","blk14","blk34","block"],n:["bne","bnequiv","bnot"],o:["bopf","bot","bottom","bowtie","boxDL","boxDR","boxDl","boxDr","boxH","boxHD","boxHU","boxHd","boxHu","boxUL","boxUR","boxUl","boxUr","boxV","boxVH","boxVL","boxVR","boxVh","boxVl","boxVr","boxbox","boxdL","boxdR","boxdl","boxdr","boxh","boxhD","boxhU","boxhd","boxhu","boxminus","boxplus","boxtimes","boxuL","boxuR","boxul","boxur","boxv","boxvH","boxvL","boxvR","boxvh","boxvl","boxvr"],p:["bprime"],r:["breve","brvbar"],s:["bscr","bsemi","bsim","bsime","bsol","bsolb","bsolhsub"],u:["bull","bullet","bump","bumpE","bumpe","bumpeq"]},c:{a:["cacute","cap","capand","capbrcup","capcap","capcup","capdot","caps","caret","caron"],c:["ccaps","ccaron","ccedil","ccirc","ccups","ccupssm"],d:["cdot"],e:["cedil","cemptyv","cent","centerdot"],f:["cfr"],h:["chcy","check","checkmark","chi"],i:["cir","cirE","circ","circeq","circlearrowleft","circlearrowright","circledR","circledS","circledast","circledcirc","circleddash","cire","cirfnint","cirmid","cirscir"],l:["clubs","clubsuit"],o:["colon","colone","coloneq","comma","commat","comp","compfn","complement","complexes","cong","congdot","conint","copf","coprod","copy","copysr"],r:["crarr","cross"],s:["cscr","csub","csube","csup","csupe"],t:["ctdot"],u:["cudarrl","cudarrr","cuepr","cuesc","cularr","cularrp","cup","cupbrcap","cupcap","cupcup","cupdot","cupor","cups","curarr","curarrm","curlyeqprec","curlyeqsucc","curlyvee","curlywedge","curren","curvearrowleft","curvearrowright","cuvee","cuwed"],w:["cwconint","cwint"],y:["cylcty"]},d:{A:["dArr"],H:["dHar"],a:["dagger","daleth","darr","dash","dashv"],b:["dbkarow","dblac"],c:["dcaron","dcy"],d:["dd","ddagger","ddarr","ddotseq"],e:["deg","delta","demptyv"],f:["dfisht","dfr"],h:["dharl","dharr"],i:["diam","diamond","diamondsuit","diams","die","digamma","disin","div","divide","divideontimes","divonx"],j:["djcy"],l:["dlcorn","dlcrop"],o:["dollar","dopf","dot","doteq","doteqdot","dotminus","dotplus","dotsquare","doublebarwedge","downarrow","downdownarrows","downharpoonleft","downharpoonright"],r:["drbkarow","drcorn","drcrop"],s:["dscr","dscy","dsol","dstrok"],t:["dtdot","dtri","dtrif"],u:["duarr","duhar"],w:["dwangle"],z:["dzcy","dzigrarr"]},e:{D:["eDDot","eDot"],a:["eacute","easter"],c:["ecaron","ecir","ecirc","ecolon","ecy"],d:["edot"],e:["ee"],f:["efDot","efr"],g:["eg","egrave","egs","egsdot"],l:["el","elinters","ell","els","elsdot"],m:["emacr","empty","emptyset","emptyv","emsp13","emsp14","emsp"],n:["eng","ensp"],o:["eogon","eopf"],p:["epar","eparsl","eplus","epsi","epsilon","epsiv"],q:["eqcirc","eqcolon","eqsim","eqslantgtr","eqslantless","equals","equest","equiv","equivDD","eqvparsl"],r:["erDot","erarr"],s:["escr","esdot","esim"],t:["eta","eth"],u:["euml","euro"],x:["excl","exist","expectation","exponentiale"]},f:{a:["fallingdotseq"],c:["fcy"],e:["female"],f:["ffilig","fflig","ffllig","ffr"],i:["filig"],j:["fjlig"],l:["flat","fllig","fltns"],n:["fnof"],o:["fopf","forall","fork","forkv"],p:["fpartint"],r:["frac12","frac13","frac14","frac15","frac16","frac18","frac23","frac25","frac34","frac35","frac38","frac45","frac56","frac58","frac78","frasl","frown"],s:["fscr"]},g:{E:["gE","gEl"],a:["gacute","gamma","gammad","gap"],b:["gbreve"],c:["gcirc","gcy"],d:["gdot"],e:["ge","gel","geq","geqq","geqslant","ges","gescc","gesdot","gesdoto","gesdotol","gesl","gesles"],f:["gfr"],g:["gg","ggg"],i:["gimel"],j:["gjcy"],l:["gl","glE","gla","glj"],n:["gnE","gnap","gnapprox","gne","gneq","gneqq","gnsim"],o:["gopf"],r:["grave"],s:["gscr","gsim","gsime","gsiml"],t:["gt","gtcc","gtcir","gtdot","gtlPar","gtquest","gtrapprox","gtrarr","gtrdot","gtreqless","gtreqqless","gtrless","gtrsim"],v:["gvertneqq","gvnE"]},h:{A:["hArr"],a:["hairsp","half","hamilt","hardcy","harr","harrcir","harrw"],b:["hbar"],c:["hcirc"],e:["hearts","heartsuit","hellip","hercon"],f:["hfr"],k:["hksearow","hkswarow"],o:["hoarr","homtht","hookleftarrow","hookrightarrow","hopf","horbar"],s:["hscr","hslash","hstrok"],y:["hybull","hyphen"]},i:{a:["iacute"],c:["ic","icirc","icy"],e:["iecy","iexcl"],f:["iff","ifr"],g:["igrave"],i:["ii","iiiint","iiint","iinfin","iiota"],j:["ijlig"],m:["imacr","image","imagline","imagpart","imath","imof","imped"],n:["in","incare","infin","infintie","inodot","int","intcal","integers","intercal","intlarhk","intprod"],o:["iocy","iogon","iopf","iota"],p:["iprod"],q:["iquest"],s:["iscr","isin","isinE","isindot","isins","isinsv","isinv"],t:["it","itilde"],u:["iukcy","iuml"]},j:{c:["jcirc","jcy"],f:["jfr"],m:["jmath"],o:["jopf"],s:["jscr","jsercy"],u:["jukcy"]},k:{a:["kappa","kappav"],c:["kcedil","kcy"],f:["kfr"],g:["kgreen"],h:["khcy"],j:["kjcy"],o:["kopf"],s:["kscr"]},l:{A:["lAarr","lArr","lAtail"],B:["lBarr"],E:["lE","lEg"],H:["lHar"],a:["lacute","laemptyv","lagran","lambda","lang","langd","langle","lap","laquo","larr","larrb","larrbfs","larrfs","larrhk","larrlp","larrpl","larrsim","larrtl","lat","latail","late","lates"],b:["lbarr","lbbrk","lbrace","lbrack","lbrke","lbrksld","lbrkslu"],c:["lcaron","lcedil","lceil","lcub","lcy"],d:["ldca","ldquo","ldquor","ldrdhar","ldrushar","ldsh"],e:["le","leftarrow","leftarrowtail","leftharpoondown","leftharpoonup","leftleftarrows","leftrightarrow","leftrightarrows","leftrightharpoons","leftrightsquigarrow","leftthreetimes","leg","leq","leqq","leqslant","les","lescc","lesdot","lesdoto","lesdotor","lesg","lesges","lessapprox","lessdot","lesseqgtr","lesseqqgtr","lessgtr","lesssim"],f:["lfisht","lfloor","lfr"],g:["lg","lgE"],h:["lhard","lharu","lharul","lhblk"],j:["ljcy"],l:["ll","llarr","llcorner","llhard","lltri"],m:["lmidot","lmoust","lmoustache"],n:["lnE","lnap","lnapprox","lne","lneq","lneqq","lnsim"],o:["loang","loarr","lobrk","longleftarrow","longleftrightarrow","longmapsto","longrightarrow","looparrowleft","looparrowright","lopar","lopf","loplus","lotimes","lowast","lowbar","loz","lozenge","lozf"],p:["lpar","lparlt"],r:["lrarr","lrcorner","lrhar","lrhard","lrm","lrtri"],s:["lsaquo","lscr","lsh","lsim","lsime","lsimg","lsqb","lsquo","lsquor","lstrok"],t:["lt","ltcc","ltcir","ltdot","lthree","ltimes","ltlarr","ltquest","ltrPar","ltri","ltrie","ltrif"],u:["lurdshar","luruhar"],v:["lvertneqq","lvnE"]},m:{D:["mDDot"],a:["macr","male","malt","maltese","map","mapsto","mapstodown","mapstoleft","mapstoup","marker"],c:["mcomma","mcy"],d:["mdash"],e:["measuredangle"],f:["mfr"],h:["mho"],i:["micro","mid","midast","midcir","middot","minus","minusb","minusd","minusdu"],l:["mlcp","mldr"],n:["mnplus"],o:["models","mopf"],p:["mp"],s:["mscr","mstpos"],u:["mu","multimap","mumap"]},n:{G:["nGg","nGt","nGtv"],L:["nLeftarrow","nLeftrightarrow","nLl","nLt","nLtv"],R:["nRightarrow"],V:["nVDash","nVdash"],a:["nabla","nacute","nang","nap","napE","napid","napos","napprox","natur","natural","naturals"],b:["nbsp","nbump","nbumpe"],c:["ncap","ncaron","ncedil","ncong","ncongdot","ncup","ncy"],d:["ndash"],e:["ne","neArr","nearhk","nearr","nearrow","nedot","nequiv","nesear","nesim","nexist","nexists"],f:["nfr"],g:["ngE","nge","ngeq","ngeqq","ngeqslant","nges","ngsim","ngt","ngtr"],h:["nhArr","nharr","nhpar"],i:["ni","nis","nisd","niv"],j:["njcy"],l:["nlArr","nlE","nlarr","nldr","nle","nleftarrow","nleftrightarrow","nleq","nleqq","nleqslant","nles","nless","nlsim","nlt","nltri","nltrie"],m:["nmid"],o:["nopf","not","notin","notinE","notindot","notinva","notinvb","notinvc","notni","notniva","notnivb","notnivc"],p:["npar","nparallel","nparsl","npart","npolint","npr","nprcue","npre","nprec","npreceq"],r:["nrArr","nrarr","nrarrc","nrarrw","nrightarrow","nrtri","nrtrie"],s:["nsc","nsccue","nsce","nscr","nshortmid","nshortparallel","nsim","nsime","nsimeq","nsmid","nspar","nsqsube","nsqsupe","nsub","nsubE","nsube","nsubset","nsubseteq","nsubseteqq","nsucc","nsucceq","nsup","nsupE","nsupe","nsupset","nsupseteq","nsupseteqq"],t:["ntgl","ntilde","ntlg","ntriangleleft","ntrianglelefteq","ntriangleright","ntrianglerighteq"],u:["nu","num","numero","numsp"],v:["nvDash","nvHarr","nvap","nvdash","nvge","nvgt","nvinfin","nvlArr","nvle","nvlt","nvltrie","nvrArr","nvrtrie","nvsim"],w:["nwArr","nwarhk","nwarr","nwarrow","nwnear"]},o:{S:["oS"],a:["oacute","oast"],c:["ocir","ocirc","ocy"],d:["odash","odblac","odiv","odot","odsold"],e:["oelig"],f:["ofcir","ofr"],g:["ogon","ograve","ogt"],h:["ohbar","ohm"],i:["oint"],l:["olarr","olcir","olcross","oline","olt"],m:["omacr","omega","omicron","omid","ominus"],o:["oopf"],p:["opar","operp","oplus"],r:["or","orarr","ord","order","orderof","ordf","ordm","origof","oror","orslope","orv"],s:["oscr","oslash","osol"],t:["otilde","otimes","otimesas"],u:["ouml"],v:["ovbar"]},p:{a:["par","para","parallel","parsim","parsl","part"],c:["pcy"],e:["percnt","period","permil","perp","pertenk"],f:["pfr"],h:["phi","phiv","phmmat","phone"],i:["pi","pitchfork","piv"],l:["planck","planckh","plankv","plus","plusacir","plusb","pluscir","plusdo","plusdu","pluse","plusmn","plussim","plustwo"],m:["pm"],o:["pointint","popf","pound"],r:["pr","prE","prap","prcue","pre","prec","precapprox","preccurlyeq","preceq","precnapprox","precneqq","precnsim","precsim","prime","primes","prnE","prnap","prnsim","prod","profalar","profline","profsurf","prop","propto","prsim","prurel"],s:["pscr","psi"],u:["puncsp"]},q:{f:["qfr"],i:["qint"],o:["qopf"],p:["qprime"],s:["qscr"],u:["quaternions","quatint","quest","questeq","quot"]},r:{A:["rAarr","rArr","rAtail"],B:["rBarr"],H:["rHar"],a:["race","racute","radic","raemptyv","rang","rangd","range","rangle","raquo","rarr","rarrap","rarrb","rarrbfs","rarrc","rarrfs","rarrhk","rarrlp","rarrpl","rarrsim","rarrtl","rarrw","ratail","ratio","rationals"],b:["rbarr","rbbrk","rbrace","rbrack","rbrke","rbrksld","rbrkslu"],c:["rcaron","rcedil","rceil","rcub","rcy"],d:["rdca","rdldhar","rdquo","rdquor","rdsh"],e:["real","realine","realpart","reals","rect","reg"],f:["rfisht","rfloor","rfr"],h:["rhard","rharu","rharul","rho","rhov"],i:["rightarrow","rightarrowtail","rightharpoondown","rightharpoonup","rightleftarrows","rightleftharpoons","rightrightarrows","rightsquigarrow","rightthreetimes","ring","risingdotseq"],l:["rlarr","rlhar","rlm"],m:["rmoust","rmoustache"],n:["rnmid"],o:["roang","roarr","robrk","ropar","ropf","roplus","rotimes"],p:["rpar","rpargt","rppolint"],r:["rrarr"],s:["rsaquo","rscr","rsh","rsqb","rsquo","rsquor"],t:["rthree","rtimes","rtri","rtrie","rtrif","rtriltri"],u:["ruluhar"],x:["rx"]},s:{a:["sacute"],b:["sbquo"],c:["sc","scE","scap","scaron","sccue","sce","scedil","scirc","scnE","scnap","scnsim","scpolint","scsim","scy"],d:["sdot","sdotb","sdote"],e:["seArr","searhk","searr","searrow","sect","semi","seswar","setminus","setmn","sext"],f:["sfr","sfrown"],h:["sharp","shchcy","shcy","shortmid","shortparallel","shy"],i:["sigma","sigmaf","sigmav","sim","simdot","sime","simeq","simg","simgE","siml","simlE","simne","simplus","simrarr"],l:["slarr"],m:["smallsetminus","smashp","smeparsl","smid","smile","smt","smte","smtes"],o:["softcy","sol","solb","solbar","sopf"],p:["spades","spadesuit","spar"],q:["sqcap","sqcaps","sqcup","sqcups","sqsub","sqsube","sqsubset","sqsubseteq","sqsup","sqsupe","sqsupset","sqsupseteq","squ","square","squarf","squf"],r:["srarr"],s:["sscr","ssetmn","ssmile","sstarf"],t:["star","starf","straightepsilon","straightphi","strns"],u:["sub","subE","subdot","sube","subedot","submult","subnE","subne","subplus","subrarr","subset","subseteq","subseteqq","subsetneq","subsetneqq","subsim","subsub","subsup","succ","succapprox","succcurlyeq","succeq","succnapprox","succneqq","succnsim","succsim","sum","sung","sup1","sup2","sup3","sup","supE","supdot","supdsub","supe","supedot","suphsol","suphsub","suplarr","supmult","supnE","supne","supplus","supset","supseteq","supseteqq","supsetneq","supsetneqq","supsim","supsub","supsup"],w:["swArr","swarhk","swarr","swarrow","swnwar"],z:["szlig"]},t:{a:["target","tau"],b:["tbrk"],c:["tcaron","tcedil","tcy"],d:["tdot"],e:["telrec"],f:["tfr"],h:["there4","therefore","theta","thetasym","thetav","thickapprox","thicksim","thinsp","thkap","thksim","thorn"],i:["tilde","times","timesb","timesbar","timesd","tint"],o:["toea","top","topbot","topcir","topf","topfork","tosa"],p:["tprime"],r:["trade","triangle","triangledown","triangleleft","trianglelefteq","triangleq","triangleright","trianglerighteq","tridot","trie","triminus","triplus","trisb","tritime","trpezium"],s:["tscr","tscy","tshcy","tstrok"],w:["twixt","twoheadleftarrow","twoheadrightarrow"]},u:{A:["uArr"],H:["uHar"],a:["uacute","uarr"],b:["ubrcy","ubreve"],c:["ucirc","ucy"],d:["udarr","udblac","udhar"],f:["ufisht","ufr"],g:["ugrave"],h:["uharl","uharr","uhblk"],l:["ulcorn","ulcorner","ulcrop","ultri"],m:["umacr","uml"],o:["uogon","uopf"],p:["uparrow","updownarrow","upharpoonleft","upharpoonright","uplus","upsi","upsih","upsilon","upuparrows"],r:["urcorn","urcorner","urcrop","uring","urtri"],s:["uscr"],t:["utdot","utilde","utri","utrif"],u:["uuarr","uuml"],w:["uwangle"]},v:{A:["vArr"],B:["vBar","vBarv"],D:["vDash"],a:["vangrt","varepsilon","varkappa","varnothing","varphi","varpi","varpropto","varr","varrho","varsigma","varsubsetneq","varsubsetneqq","varsupsetneq","varsupsetneqq","vartheta","vartriangleleft","vartriangleright"],c:["vcy"],d:["vdash"],e:["vee","veebar","veeeq","vellip","verbar","vert"],f:["vfr"],l:["vltri"],n:["vnsub","vnsup"],o:["vopf"],p:["vprop"],r:["vrtri"],s:["vscr","vsubnE","vsubne","vsupnE","vsupne"],z:["vzigzag"]},w:{c:["wcirc"],e:["wedbar","wedge","wedgeq","weierp"],f:["wfr"],o:["wopf"],p:["wp"],r:["wr","wreath"],s:["wscr"]},x:{c:["xcap","xcirc","xcup"],d:["xdtri"],f:["xfr"],h:["xhArr","xharr"],i:["xi"],l:["xlArr","xlarr"],m:["xmap"],n:["xnis"],o:["xodot","xopf","xoplus","xotime"],r:["xrArr","xrarr"],s:["xscr","xsqcup"],u:["xuplus","xutri"],v:["xvee"],w:["xwedge"]},y:{a:["yacute","yacy"],c:["ycirc","ycy"],e:["yen"],f:["yfr"],i:["yicy"],o:["yopf"],s:["yscr"],u:["yucy","yuml"]},z:{a:["zacute"],c:["zcaron","zcy"],d:["zdot"],e:["zeetrf","zeta"],f:["zfr"],h:["zhcy"],i:["zigrarr"],o:["zopf"],s:["zscr"],w:["zwj","zwnj"]}};function Oe(e){const r={value:e,hungry:!1,optional:!1};return(r.value.endsWith("?*")||r.value.endsWith("*?"))&&r.value.length>2?(r.value=r.value.slice(0,r.value.length-2),r.optional=!0,r.hungry=!0):r.value.endsWith("?")&&r.value.length>1?(r.value=r.value.slice(0,r.value.length-1),r.optional=!0):r.value.endsWith("*")&&r.value.length>1&&(r.value=r.value.slice(0,r.value.length-1),r.hungry=!0),r}function De(e){return"number"==typeof e}function Le(e){return"string"==typeof e}function ke(e,r){if("string"!=typeof e||!e.length)return null;if(r&&"number"==typeof r||(r=0),!e[r+1])return null;if(e[r+1]&&e[r+1].trim().length)return r+1;if(e[r+2]&&e[r+2].trim().length)return r+2;for(let t=r+1,n=e.length;t<n;t++)if(e[t].trim().length)return t;return null}function xe(e,r){if("string"!=typeof e||!e.length)return null;if(r&&"number"==typeof r||(r=0),r<1)return null;if(e[r-1]&&e[r-1].trim().length)return r-1;if(e[r-2]&&e[r-2].trim().length)return r-2;for(let t=r;t--;)if(e[t]&&e[t].trim().length)return t;return null}function Re(e,r,t,n,o){if("string"!=typeof r||!r.length)return null;if(t&&"number"==typeof t||(t=0),"right"===e&&!r[t+1]||"left"===e&&!r[t-1])return null;let a=t;const i=[];let s,c,l,u=0;for(;u<o.length;){if(!Le(o[u])||!o[u].length){u++;continue}const{value:t,optional:p,hungry:f}=Oe(o[u]),g="right"===e?ke(r,a):xe(r,a);if(!(n.i&&r[g].toLowerCase()===t.toLowerCase()||!n.i&&r[g]===t)){if(p){u++;continue}if(l){u++,l=void 0;continue}return null}{const o="right"===e?ke(r,g):xe(r,g);f&&(n.i&&r[o].toLowerCase()===t.toLowerCase()||!n.i&&r[o]===t)?l=!0:u++,"right"===e&&g>a+1?i.push([a+1,g]):"left"===e&&g<a-1&&i.unshift([g+1,a]),a=g,"right"===e?(void 0===s&&(s=g),c=g):(void 0===c&&(c=g),s=g)}}return void 0===s?null:{gaps:i,leftmostChar:s,rightmostChar:c}}function Ve(e,r,...t){if(!t.length)return xe(e,r);const n={i:!1};let o;return Re("left",e,r,o=f(t[0])?Object.assign({},n,t.shift()):n,Array.from(t).reverse())}function Ce(e,r,...t){if(!t.length)return ke(e,r);const n={i:!1};let o;return Re("right",e,r,o=f(t[0])?Object.assign({},n,t.shift()):n,t)}function $e(e,r,t,n,o){if("string"!=typeof r||!r.length)return null;if(t&&"number"==typeof t||(t=0),"right"===e&&!r[t+1]||"left"===e&&(De(t)&&t<1||"0"===t))return null;let a=null,i=null;do{null!==(a="right"===e?Ce(r,De(i)?i:t,...o):Ve(r,De(i)?i:t,...o))&&(i="right"===e?a.rightmostChar:a.leftmostChar)}while(a);if(null!=i&&"right"===e&&i++,null===i)return null;if("right"===e){if(r[i]&&r[i].trim().length)return i;const e=ke(r,i);if(0===n.mode){if(e===i+1)return i;if(!(r.slice(i,e||r.length).trim().length||r.slice(i,e||r.length).includes("\n")||r.slice(i,e||r.length).includes("\r")))return e?e-1:r.length;for(let e=i,t=r.length;e<t;e++)if("\n\r".includes(r[e]))return e}else{if(1===n.mode)return i;if(2===n.mode){const e=r.slice(i);if(e.trim().length||e.includes("\n")||e.includes("\r"))for(let e=i,t=r.length;e<t;e++)if(r[e].trim().length||"\n\r".includes(r[e]))return e;return r.length}}return e||r.length}if(r[i]&&r[i-1]&&r[i-1].trim().length)return i;const s=xe(r,i);if(0===n.mode){if(s===i-2)return i;if(r.slice(0,i).trim().length||r.slice(0,i).includes("\n")||r.slice(0,i).includes("\r"))for(let e=i;e--;)if("\n\r".includes(r[e])||r[e].trim().length)return e+1+(r[e].trim().length?1:0);return 0}if(1===n.mode)return i;if(2===n.mode){const e=r.slice(0,i);if(e.trim().length||e.includes("\n")||e.includes("\r"))for(let e=i;e--;)if(r[e].trim().length||"\n\r".includes(r[e]))return e+1;return 0}return null!==s?s+1:0}function Pe(e,r,...t){if(!t.length||1===t.length&&f(t[0]))return null;const n={mode:0};if(f(t[0])){const o=Object.assign({},n,A(t[0]));if(o.mode){if(Le(o.mode)&&"0123".includes(o.mode))o.mode=Number.parseInt(o.mode,10);else if(!De(o.mode))throw new Error(`string-left-right/chompLeft(): [THROW_ID_01] the opts.mode is wrong! It should be 0, 1, 2 or 3. It was given as ${o.mode} (type ${typeof o.mode})`)}else o.mode=0;return $e("left",e,r,o,A(t).slice(1))}return Le(t[0])?$e("left",e,r,n,A(t)):$e("left",e,r,n,A(t).slice(1))}return function(t,n){function o(e){return!("string"==typeof e&&1===e.length&&e.toUpperCase()!==e.toLowerCase())}if("string"!=typeof t)throw new Error("string-fix-broken-named-entities: [THROW_ID_01] the first input argument must be string! It was given as:\n".concat(JSON.stringify(t,null,4)," (").concat(e(t),"-type)"));var a,i={decode:!1,cb:null,progressFn:null};if(null!=n){if(!f(n))throw new Error("string-fix-broken-named-entities: [THROW_ID_02] the second input argument must be a plain object! I was given as:\n".concat(JSON.stringify(n,null,4)," (").concat(e(n),"-type)"));a=Object.assign({},i,n)}else a=i;if(a.cb&&"function"!=typeof a.cb)throw new TypeError("string-fix-broken-named-entities: [THROW_ID_03] opts.cb must be a function (or falsey)! Currently it's: ".concat(e(a.cb),", equal to: ").concat(JSON.stringify(a.cb,null,4)));if(a.progressFn&&"function"!=typeof a.progressFn)throw new TypeError("string-fix-broken-named-entities: [THROW_ID_04] opts.progressFn must be a function (or falsey)! Currently it's: ".concat(e(a.progressFn),", equal to: ").concat(JSON.stringify(a.progressFn,null,4)));var s,c,l,u,p,g,h=!1,d={nameStartsAt:null,ampersandNecessary:null,patience:2,matchedN:null,matchedB:null,matchedS:null,matchedP:null,matchedSemicol:null},m=A(d),y=function(){m=A(d)},b=[],v=[],w=t.length+1,q=0,S=null;e:for(var _=0;_<w;_++){if(a.progressFn&&(p=Math.floor(q/w*100))!==g&&(g=p,a.progressFn(p)),S){if(!(!0!==S&&_>=S))continue;S=null}if(l=(null!==m.matchedN?1:0)+(null!==m.matchedB?1:0)+(null!==m.matchedS?1:0)+(null!==m.matchedP?1:0),u=[m.matchedN,m.matchedB,m.matchedS,m.matchedP].filter(function(e){return null!==e}),s=Math.min.apply(Math,r(u)),c=Math.max.apply(Math,r(u)),null!==m.nameStartsAt&&l>2&&(null!==m.matchedSemicol||!m.ampersandNecessary||o(t[m.nameStartsAt-1])&&o(t[_])||(o(t[m.nameStartsAt-1])||o(t[_]))&&c-s<=4||null!==m.matchedN&&null!==m.matchedB&&null!==m.matchedS&&null!==m.matchedP&&m.matchedN+1===m.matchedB&&m.matchedB+1===m.matchedS&&m.matchedS+1===m.matchedP)&&(!t[_]||null!==m.matchedN&&null!==m.matchedB&&null!==m.matchedS&&null!==m.matchedP&&t[_]!==t[_-1]||"n"!==t[_].toLowerCase()&&"b"!==t[_].toLowerCase()&&"s"!==t[_].toLowerCase()&&"p"!==t[_].toLowerCase()||";"===t[xe(t,_)])&&";"!==t[_]&&(void 0===t[_+1]||";"!==t[ke(t,_)])){if(!1!==m.ampersandNecessary&&"&nbsp;"!==t.slice(m.nameStartsAt,_)||!1===m.ampersandNecessary&&"nbsp;"!==t.slice(Math.min(m.matchedN,m.matchedB,m.matchedS,m.matchedP),_))if(null==m.nameStartsAt||_-m.nameStartsAt!=5||"&nbsp"!==t.slice(m.nameStartsAt,_)||a.decode){var E=Pe(t,m.nameStartsAt,"&?","a","m","p",";?"),N=E||m.nameStartsAt;a.cb&&v.push(a.cb({ruleName:"bad-named-html-entity-malformed-nbsp",entityName:"nbsp",rangeFrom:N,rangeTo:_,rangeValEncoded:"&nbsp;",rangeValDecoded:""})),b.push([N,_,a.decode?"":"&nbsp;"])}else a.cb&&v.push(a.cb({ruleName:"bad-named-html-entity-missing-semicolon",entityName:"nbsp",rangeFrom:_,rangeTo:_,rangeValEncoded:";",rangeValDecoded:";"})),b.push([_,_,";"]);y()}else if(t[_]&&";"===t[_-1]&&!Ve(t,_-1,"a","m","p")&&";"!==t[_]&&l>0)y();else{if("a"===t[_]){var T=Ce(t,_,"m","p",";");T&&function(){var e=T.rightmostChar+1,r=Ce(t,T.rightmostChar,"a","m","p",";");if(r){var n;e=r.rightmostChar+1;do{(n=Ce(t,e-1,"a","m","p",";"))&&(e=n.rightmostChar+1)}while(n)}var o=ke(t,e-1),i=o?ke(t,o):null,s=void 0;if(i&&je.hasOwnProperty(t[o])&&je[t[o]].hasOwnProperty(t[i])&&je[t[o]][t[i]].some(function(e){if(t.startsWith("".concat(e,";"),o))return s=e,!0})){S=o+s.length+1;var c=xe(t,_);if("&"===t[c])a.cb&&v.push(a.cb({ruleName:"bad-named-html-entity-multiple-encoding",entityName:"amp",rangeFrom:c+1,rangeTo:o,rangeValEncoded:null,rangeValDecoded:null})),b.push([c+1,o]);else if(c){var l=c+1,u="";t[l].trim().length||(" "===t[l]?l++:"\n\r".includes(t[l])?l=_:u=" "),a.cb&&v.push(a.cb({ruleName:"bad-named-html-entity-multiple-encoding",entityName:"amp",rangeFrom:l,rangeTo:o,rangeValEncoded:"".concat(u,"&"),rangeValDecoded:"".concat(u,"&")})),b.push([l,o,"".concat(u,"&")])}}}()}if("&"===t[_]){if(m.nameStartsAt&&m.nameStartsAt<_&&(m.matchedN||m.matchedB||m.matchedS||m.matchedP)&&y(),null===m.nameStartsAt)null===m.ampersandNecessary&&(m.nameStartsAt=_,m.ampersandNecessary=!1);else if(!m.ampersandNecessary){var j=_+1,O=ke(t,_);if("&"===t[O])for(var D=O;D<w;D++)if(t[D].trim().length&&"&"!==t[D]){j=D,S=D;break}a.cb&&v.push(a.cb({ruleName:"bad-named-html-entity-duplicate-ampersand",entityName:"nbsp",rangeFrom:_,rangeTo:j,rangeValEncoded:null,rangeValDecoded:null})),b.push([_,j])}if("a"===t[_+1]&&"n"===t[_+2]&&"g"===t[_+3]){if("s"!==t[_+4]&&";"!==t[_+4]){a.cb&&v.push(a.cb({ruleName:"bad-named-html-entity-missing-semicolon",entityName:"ang",rangeFrom:_+4,rangeTo:_+4,rangeValEncoded:"&ang;",rangeValDecoded:""})),b.push([_,_+4,a.decode?"":"&ang;"]),_+=3;continue e}if("s"===t[_+4]&&"t"===t[_+5]&&";"!==t[_+6]){a.cb&&v.push(a.cb({ruleName:"bad-named-html-entity-missing-semicolon",entityName:"angst",rangeFrom:_+6,rangeTo:_+6,rangeValEncoded:"&angst;",rangeValDecoded:""})),b.push([_,_+6,a.decode?"":"&angst;"]),_+=5;continue e}}else if("p"===t[_+1]&&"i"===t[_+2]){if("v"!==t[_+3]&&";"!==t[_+3]){a.cb&&v.push(a.cb({ruleName:"bad-named-html-entity-missing-semicolon",entityName:"pi",rangeFrom:_+3,rangeTo:_+3,rangeValEncoded:"&pi;",rangeValDecoded:""})),b.push([_,_+3,a.decode?"":"&pi;"]),_+=3;continue e}if("v"===t[_+3]&&";"!==t[_+4]){a.cb&&v.push(a.cb({ruleName:"bad-named-html-entity-missing-semicolon",entityName:"piv",rangeFrom:_+4,rangeTo:_+4,rangeValEncoded:"&piv;",rangeValDecoded:""})),b.push([_,_+4,a.decode?"":"&piv;"]),_+=3;continue e}}else{if("P"===t[_+1]&&"i"===t[_+2]&&";"!==t[_+3]){a.cb&&v.push(a.cb({ruleName:"bad-named-html-entity-missing-semicolon",entityName:"Pi",rangeFrom:_+3,rangeTo:_+3,rangeValEncoded:"&Pi;",rangeValDecoded:""})),b.push([_,_+3,a.decode?"":"&Pi;"]),_+=2;continue e}if("s"===t[_+1]){if("i"===t[_+2]&&"g"===t[_+3]&&"m"===t[_+4]&&"a"===t[_+5]&&";"!==t[_+6]&&"f"!==t[_+6]){a.cb&&v.push(a.cb({ruleName:"bad-named-html-entity-missing-semicolon",entityName:"sigma",rangeFrom:_+6,rangeTo:_+6,rangeValEncoded:"&sigma;",rangeValDecoded:""})),b.push([_,_+6,a.decode?"":"&sigma;"]),_+=5;continue e}if("u"===t[_+2]&&"b"===t[_+3]&&";"!==t[_+4]&&"e"!==t[_+4]){a.cb&&v.push(a.cb({ruleName:"bad-named-html-entity-missing-semicolon",entityName:"sub",rangeFrom:_+4,rangeTo:_+4,rangeValEncoded:"&sub;",rangeValDecoded:""})),b.push([_,_+4,a.decode?"":"&sub;"]),_+=3;continue e}if("u"===t[_+2]&&"p"===t[_+3]&&"f"!==t[_+4]&&"e"!==t[_+4]&&"1"!==t[_+4]&&"2"!==t[_+4]&&"3"!==t[_+4]&&";"!==t[_+4]){a.cb&&v.push(a.cb({ruleName:"bad-named-html-entity-missing-semicolon",entityName:"sup",rangeFrom:_+4,rangeTo:_+4,rangeValEncoded:"&sup;",rangeValDecoded:""})),b.push([_,_+4,a.decode?"":"&sup;"]),_+=3;continue e}}else if("t"===t[_+1]){if("h"===t[_+2]&&"e"===t[_+3]&&"t"===t[_+4]&&"a"===t[_+5]&&"s"!==t[_+6]&&";"!==t[_+6]){a.cb&&v.push(a.cb({ruleName:"bad-named-html-entity-missing-semicolon",entityName:"theta",rangeFrom:_+6,rangeTo:_+6,rangeValEncoded:"&theta;",rangeValDecoded:""})),b.push([_,_+6,a.decode?"":"&theta;"]),_+=5;continue e}if("h"===t[_+2]&&"i"===t[_+3]&&"n"===t[_+4]&&"s"===t[_+5]&&"p"===t[_+6]&&";"!==t[_+7]){a.cb&&v.push(a.cb({ruleName:"bad-named-html-entity-missing-semicolon",entityName:"thinsp",rangeFrom:_+7,rangeTo:_+7,rangeValEncoded:"&thinsp;",rangeValDecoded:""})),b.push([_,_+7,a.decode?"":"&thinsp;"]),_+=6;continue e}}}}if(t[_]&&"n"===t[_].toLowerCase()){if("i"===t[_-1]&&"s"===t[_+1]){y();continue e}null===m.matchedN&&(m.matchedN=_),null===m.nameStartsAt&&(m.nameStartsAt=_,null!==m.ampersandNecessary||h?!0!==m.ampersandNecessary&&(m.ampersandNecessary=!1):m.ampersandNecessary=!0)}if(t[_]&&"b"===t[_].toLowerCase())if(null!==m.nameStartsAt)null===m.matchedB&&(m.matchedB=_);else{if(!m.patience){y();continue e}m.patience--,m.nameStartsAt=_,m.matchedB=_,null!==m.ampersandNecessary||h?!0!==m.ampersandNecessary&&(m.ampersandNecessary=!1):m.ampersandNecessary=!0}if(t[_]&&"s"===t[_].toLowerCase())if(null!==m.nameStartsAt)null===m.matchedS&&(m.matchedS=_);else{if(!m.patience){y();continue e}m.patience--,m.nameStartsAt=_,m.matchedS=_,null!==m.ampersandNecessary||h?!0!==m.ampersandNecessary&&(m.ampersandNecessary=!1):m.ampersandNecessary=!0}if(t[_]&&"p"===t[_].toLowerCase())if(null!==m.nameStartsAt)null===m.matchedP&&(m.matchedP=_);else{if(!m.patience){y();continue e}m.patience--,m.nameStartsAt=_,m.matchedP=_,null!==m.ampersandNecessary||h?!0!==m.ampersandNecessary&&(m.ampersandNecessary=!1):m.ampersandNecessary=!0}if(";"===t[_]&&null!==m.nameStartsAt&&(m.matchedSemicol=_,(!m.matchedN||m.matchedB||m.matchedS||m.matchedP)&&(m.matchedN||!m.matchedB||m.matchedS||m.matchedP)&&(m.matchedN||m.matchedB||!m.matchedS||m.matchedP)&&(m.matchedN||m.matchedB||m.matchedS||!m.matchedP)||y()),h&&(h=!1,m.nameStartsAt&&(m.matchedN||m.matchedB||m.matchedS||m.matchedP)&&(m.ampersandNecessary=!1)),null!==m.nameStartsAt&&_>m.nameStartsAt&&t[_]&&"n"!==t[_].toLowerCase()&&"b"!==t[_].toLowerCase()&&"s"!==t[_].toLowerCase()&&"p"!==t[_].toLowerCase()&&"&"!==t[_]&&";"!==t[_]&&" "!==t[_]){if(!m.patience){y();continue e}m.patience=m.patience-1}q++}}return b.length?a.cb?v.filter(function(e,r){return!b.some(function(e,t){return r!==t&&b[r][0]>=e[0]&&b[r][1]<=e[1]})}):function(e,r){function t(e){return"string"==typeof e}if(!Array.isArray(e))return e;const n={mergeType:1,progressFn:null,joinRangesThatTouchEdges:!0};let o;if(r){if(!f(r))throw new Error(`emlint: [THROW_ID_03] the second input argument must be a plain object. It was given as:\n${JSON.stringify(r,null,4)} (type ${typeof r})`);if((o=Object.assign({},n,r)).progressFn&&"function"!=typeof o.progressFn)throw new Error(`ranges-merge: [THROW_ID_01] the second input argument must be a function! It was given of a type: "${typeof o.progressFn}", equal to ${JSON.stringify(o.progressFn,null,4)}`);if(o.mergeType&&1!==o.mergeType&&2!==o.mergeType)if(t(o.mergeType)&&"1"===o.mergeType.trim())o.mergeType=1;else{if(!t(o.mergeType)||"2"!==o.mergeType.trim())throw new Error(`ranges-merge: [THROW_ID_02] opts.mergeType was customised to a wrong thing! It was given of a type: "${typeof o.mergeType}", equal to ${JSON.stringify(o.progressFn,null,4)}`);o.mergeType=2}if("boolean"!=typeof o.joinRangesThatTouchEdges)throw new Error(`ranges-merge: [THROW_ID_04] opts.joinRangesThatTouchEdges was customised to a wrong thing! It was given of a type: "${typeof o.joinRangesThatTouchEdges}", equal to ${JSON.stringify(o.joinRangesThatTouchEdges,null,4)}`)}else o=A(n);const a=A(e).filter(e=>void 0!==e[2]||e[0]!==e[1]);let i,s,c;const l=(i=o.progressFn?Te(a,{progressFn:e=>{(c=Math.floor(e/5))!==s&&(s=c,o.progressFn(c))}}):Te(a)).length-1;for(let e=l;e>0;e--)o.progressFn&&(c=Math.floor(78*(1-e/l))+21)!==s&&c>s&&(s=c,o.progressFn(c)),(i[e][0]<=i[e-1][0]||!o.joinRangesThatTouchEdges&&i[e][0]<i[e-1][1]||o.joinRangesThatTouchEdges&&i[e][0]<=i[e-1][1])&&(i[e-1][0]=Math.min(i[e][0],i[e-1][0]),i[e-1][1]=Math.max(i[e][1],i[e-1][1]),void 0!==i[e][2]&&(i[e-1][0]>=i[e][0]||i[e-1][1]<=i[e][1])&&null!==i[e-1][2]&&(null===i[e][2]&&null!==i[e-1][2]?i[e-1][2]=null:void 0!==i[e-1][2]?2===o.mergeType&&i[e-1][0]===i[e][0]?i[e-1][2]=i[e][2]:i[e-1][2]+=i[e][2]:i[e-1][2]=i[e][2]),i.splice(e,1),e=i.length);return i}(b,{joinRangesThatTouchEdges:!1}):null}});
